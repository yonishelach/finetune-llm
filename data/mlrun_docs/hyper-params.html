
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Hyperparameter tuning optimization</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    <link rel="stylesheet" type="text/css" href="/_/static/css/badge_only.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/design-tabs.js"></script>
    <script async="async" src="/_/static/javascript/readthedocs-doc-embed.js"></script>
    <link rel="canonical" href="https://docs.mlrun.org/en/stable/hyper-params.html" />
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Training with the feature store" href="feature-store/retrieve-offline-data.html" />
    <link rel="prev" title="Using the built-in training function" href="training/built-in-training-function.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    

    <!-- Google Analytics -->
    
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MV26G85');</script>
<!-- End Google Tag Manager -->


  
<!-- RTD Extra Head -->

<link rel="stylesheet" href="/_/static/css/readthedocs-doc-embed.css" type="text/css" />

<script type="application/json" id="READTHEDOCS_DATA">{"ad_free": false, "api_host": "https://readthedocs.org", "build_date": "2022-12-01T09:20:35Z", "builder": "sphinx", "canonical_url": null, "commit": "9933138d", "docroot": "/docs/", "features": {"docsearch_disabled": false}, "global_analytics_code": "UA-17997319-1", "language": "en", "page": "hyper-params", "programming_language": "py", "project": "mlrun", "proxied_api_host": "/_", "source_suffix": ".ipynb", "subprojects": {}, "theme": "sphinx_book_theme", "user_analytics_code": "UA-101852366-5", "version": "stable"}</script>

<!--
Using this variable directly instead of using `JSON.parse` is deprecated.
The READTHEDOCS_DATA global variable will be removed in the future.
-->
<script type="text/javascript">
READTHEDOCS_DATA = JSON.parse(document.getElementById('READTHEDOCS_DATA').innerHTML);
</script>

<script type="text/javascript" src="/_/static/javascript/readthedocs-analytics.js" async="async"></script>

<!-- end RTD <extrahead> -->
</head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/MLRun_Character.png" class="logo" alt="logo">
      
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  MLRun basics
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="index.html">
   Using MLRun
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="architecture.html">
     MLRun architecture
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="mlops-dev-flow.html">
   MLOps development workflow
   <!-- omit in toc -->
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="tutorial/index.html">
   Tutorials and Examples
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="tutorial/01-mlrun-basics.html">
     Quick start tutorial
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="tutorial/02-model-training.html">
     Train, compare, and register models
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="tutorial/03-model-serving.html">
     Serving pre-trained ML/DL models
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="tutorial/04-pipeline.html">
     Projects and automated ML pipeline
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="tutorial/05-model-monitoring.html">
     Model monitoring and drift detection
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="tutorial/06-add-mlops-to-code.html">
     Add MLOps to existing code
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="tutorial/07-batch-infer.html">
     Batch inference and drift detection
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="feature-store/basic-demo.html">
     Feature store example (stocks)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference external" href="https://github.com/mlrun/demos">
     MLRun demos repository
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="install.html">
   Installation and setup guide
   <!-- omit in toc -->
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="install/local-docker.html">
     Install MLRun locally using Docker
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="install/kubernetes.html">
     Install MLRun on Kubernetes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="install/aws-install.html">
     Install MLRun on AWS
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="install/remote.html">
     Set up your client environment
     <!-- omit in toc -->
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Core components
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="projects/project.html">
   Projects and automation
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="projects/create-project.html">
     Create, save, and use projects
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="projects/load-project.html">
     Load and run projects
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="projects/run-build-deploy.html">
     Run, build, and deploy functions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="projects/build-run-workflows-pipelines.html">
     Build and run workflows/pipelines
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="projects/ci-integration.html">
     CI/CD integration
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="secrets.html">
     Working with secrets
     <!-- omit in toc -->
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="runtimes/functions.html">
   Serverless functions
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="runtimes/functions-architecture.html">
     Functions architecture
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="concepts/functions-overview.html">
     Kinds of functions (runtimes)
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
    <label for="toctree-checkbox-6">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="runtimes/dask-overview.html">
       Dask distributed runtime
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
      <label for="toctree-checkbox-7">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="runtimes/dask-mlrun.html">
         Running Dask on the cluster with mlrun
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="runtimes/dask-pipeline.html">
         Pipelines using Dask, Kubeflow and MLRun
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="runtimes/horovod.html">
       MPIJob and Horovod runtime
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="runtimes/spark-operator.html">
       Spark Operator runtime
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="concepts/nuclio-real-time-functions.html">
       Nuclio real-time functions
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="runtimes/create-and-use-functions.html">
     Create and use functions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="runtimes/mlrun_code_annotations.html">
     Converting notebooks to function
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="runtimes/function-storage.html">
     Attach storage to functions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="runtimes/images.html">
     Images and their usage in MLRun
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="runtimes/image-build.html">
     Build function image
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="concepts/node-affinity.html">
     Node affinity
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="runtimes/configuring-job-resources.html">
     Managing job resources
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="runtimes/load-from-hub.html">
     Function Hub
     <!-- omit in toc -->
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="concepts/data.html">
   Data and artifacts
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="store/datastore.html">
     Data stores
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="store/data-items.html">
     Data items
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="store/artifacts.html">
     Artifacts
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="store/models.html">
     Model Artifacts
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="feature-store/feature-store.html">
   Feature store
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
  <label for="toctree-checkbox-9">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="feature-store/feature-store-overview.html">
     Feature store overview
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="feature-store/feature-sets.html">
     Feature sets
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="feature-store/transformations.html">
     Feature set transformations
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="feature-store/feature-vectors.html">
     Creating and using feature vectors
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="feature-store/end-to-end-demo/index.html">
     Feature store end-to-end demo
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
    <label for="toctree-checkbox-10">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="feature-store/end-to-end-demo/01-ingest-datasources.html">
       Part 1: Data Ingestion
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="feature-store/end-to-end-demo/02-create-training-model.html">
       Part 2: Training
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="feature-store/end-to-end-demo/03-deploy-serving-model.html">
       Part 3: Serving
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="feature-store/end-to-end-demo/04-pipeline.html">
       Part 4: Automated ML pipeline
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="concepts/runs-workflows.html">
   Batch runs and workflows
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
  <label for="toctree-checkbox-11">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="concepts/mlrun-execution-context.html">
     MLRun execution context
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="concepts/decorators-and-auto-logging.html">
     Decorators and auto-logging
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="concepts/submitting-tasks-jobs-to-functions.html">
     Running a task (job)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="concepts/workflow-overview.html">
     Running a multi-stage workflow
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="concepts/scheduled-jobs.html">
     Scheduled jobs and workflows
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="serving/serving-graph.html">
   Real-time serving pipelines (graphs)
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
  <label for="toctree-checkbox-12">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="serving/getting-started.html">
     Getting started
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="serving/use-cases.html">
     Use cases
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="serving/realtime-pipelines.html">
     Graph concepts and state machine
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="serving/model-serving-get-started.html">
     Model serving graph
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="serving/writing-custom-steps.html">
     Writing custom steps
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="serving/available-steps.html">
     Built-in steps
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="serving/demos.html">
     Demos and tutorials
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
    <label for="toctree-checkbox-13">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="serving/distributed-graph.html">
       Distributed (multi-function) pipeline example
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="serving/graph-example.html">
       Advanced model serving graph - notebook example
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="serving/graph-ha-cfg.html">
     Serving graph high availability configuration
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="serving/pipelines-error-handling.html">
     Error handling
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="concepts/monitoring.html">
   Model monitoring
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  MLOps tasks
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="data-prep/index.html">
   Ingest and process data
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/>
  <label for="toctree-checkbox-14">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="data-prep/ingesting_data.html">
     Using data sources and items
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="data-prep/logging_datasets.html">
     Logging datasets
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="runtimes/spark-operator.html">
     Spark Operator runtime
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="data-prep/ingest-data-fs.html">
     Ingest data using the feature store
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="feature-store/using-spark-engine.html">
     Ingest features with Spark
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="development/index.html">
   Develop and train models
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/>
  <label for="toctree-checkbox-15">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2 current active has-children">
    <a class="reference internal" href="development/model-training-tracking.html">
     Model training and tracking
    </a>
    <input checked="" class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/>
    <label for="toctree-checkbox-16">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul class="current">
     <li class="toctree-l3">
      <a class="reference internal" href="training/create-a-basic-training-job.html">
       Create a basic training job
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="training/working-with-data-and-model-artifacts.html">
       Working with data and model artifacts
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="concepts/auto-logging-mlops.html">
       Automated experiment tracking
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="training/built-in-training-function.html">
       Using the built-in training function
      </a>
     </li>
     <li class="toctree-l3 current active">
      <a class="current reference internal" href="#">
       Hyperparameter tuning optimization
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="feature-store/retrieve-offline-data.html">
     Training with the feature store
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="deployment/index.html">
   Deploy models and applications
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/>
  <label for="toctree-checkbox-17">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="serving/serving-overview.html">
     Real-time deployment
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" type="checkbox"/>
    <label for="toctree-checkbox-18">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="serving/built-in-model-serving.html">
       Using built-in model serving classes
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="serving/custom-model-serving-class.html">
       Build your own model serving class
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="serving/test-deploy-model-server.html">
       Test and deploy a model server
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="serving/model-api.html">
       Model serving API
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="feature-store/training-serving.html">
     Serving with the feature store
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="deployment/batch_inference.html">
     Batch inference
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="serving/canary.html">
     Canary and rolling upgrades
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="monitoring/index.html">
   Monitor and alert
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" type="checkbox"/>
  <label for="toctree-checkbox-19">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="monitoring/model-monitoring-deployment.html">
     Model monitoring overview
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="monitoring/initial-setup-configuration.html">
     Enable model monitoring
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  References
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="genindex.html">
   API index
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="api/index.html">
   API by module
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" type="checkbox"/>
  <label for="toctree-checkbox-20">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="api/mlrun.frameworks/index.html">
     mlrun.frameworks
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" type="checkbox"/>
    <label for="toctree-checkbox-21">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="api/mlrun.frameworks/mlrun.frameworks.auto_mlrun.html">
       AutoMLRun
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/mlrun.frameworks/mlrun.frameworks.tf_keras.html">
       TensorFlow.Keras
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/mlrun.frameworks/mlrun.frameworks.pytorch.html">
       PyTorch
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/mlrun.frameworks/mlrun.frameworks.sklearn.html">
       SciKit-Learn
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/mlrun.frameworks/mlrun.frameworks.xgboost.html">
       XGBoost
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/mlrun.frameworks/mlrun.frameworks.lgbm.html">
       LightGBM
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/mlrun.html">
     mlrun
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/mlrun.artifacts.html">
     mlrun.artifacts
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/mlrun.config.html">
     mlrun.config
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/mlrun.datastore.html">
     mlrun.datastore
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/mlrun.db.html">
     mlrun.db
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/mlrun.execution.html">
     mlrun.execution
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/mlrun.feature_store.html">
     mlrun.feature_store
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/mlrun.model.html">
     mlrun.model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/mlrun.platforms.html">
     mlrun.platforms
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/mlrun.projects.html">
     mlrun.projects
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/mlrun.run.html">
     mlrun.run
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/mlrun.runtimes.html">
     mlrun.runtimes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/mlrun.serving.html">
     mlrun.serving
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/storey.transformations.html">
     storey.transformations - Graph transformations
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="cli.html">
   Command-Line Interface
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="glossary.html">
   Glossary
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            By <a href="https://www.iguazio.com/">Iguazio</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/mlrun/mlrun"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/mlrun/mlrun/issues/new?title=Issue%20on%20page%20%2Fhyper-params.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/mlrun/mlrun/edit/development/docs/hyper-params.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Edit this page"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="headerbtn__text-container">suggest edit</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="_sources/hyper-params.ipynb"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.ipynb</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#basic-code">
   Basic code
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#review-the-results">
   Review the results
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#examples">
   Examples
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#grid-search-default">
     Grid search (default)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#random-search">
     Random Search
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#list-search">
     List search
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#custom-iterator">
     Custom iterator
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#parallel-execution-over-containers">
   Parallel execution over containers
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#code-example-single-task">
     Code example (single task)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#running-the-workers-using-dask">
     Running the workers using Dask
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#define-a-dask-cluster-using-mlrun-serverless-dask">
       Define a Dask cluster (using MLRun serverless Dask)
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#define-the-parallel-work">
       Define the parallel work
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#running-the-workers-using-nuclio">
     Running the workers using Nuclio
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#create-a-nuclio-mlrun-function">
       Create a nuclio:mlrun function
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#run-the-parallel-task-over-the-function">
       Run the parallel task over the function
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Hyperparameter tuning optimization</h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#basic-code">
   Basic code
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#review-the-results">
   Review the results
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#examples">
   Examples
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#grid-search-default">
     Grid search (default)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#random-search">
     Random Search
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#list-search">
     List search
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#custom-iterator">
     Custom iterator
    </a>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#parallel-execution-over-containers">
   Parallel execution over containers
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#code-example-single-task">
     Code example (single task)
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#running-the-workers-using-dask">
     Running the workers using Dask
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#define-a-dask-cluster-using-mlrun-serverless-dask">
       Define a Dask cluster (using MLRun serverless Dask)
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#define-the-parallel-work">
       Define the parallel work
      </a>
     </li>
    </ul>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#running-the-workers-using-nuclio">
     Running the workers using Nuclio
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#create-a-nuclio-mlrun-function">
       Create a nuclio:mlrun function
      </a>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#run-the-parallel-task-over-the-function">
       Run the parallel task over the function
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section id="hyperparameter-tuning-optimization">
<span id="hyper-params"></span><h1>Hyperparameter tuning optimization<a class="headerlink" href="#hyperparameter-tuning-optimization" title="Permalink to this headline">#</a></h1>
<p>MLRun supports iterative tasks for automatic and distributed execution of many tasks with variable parameters (hyperparams). Iterative tasks can be distributed across multiple containers. They can be used for:</p>
<ul class="simple">
<li><p>Parallel loading and preparation of many data objects</p></li>
<li><p>Model training with different parameter sets and/or algorithms</p></li>
<li><p>Parallel testing with many test vector options</p></li>
<li><p>AutoML</p></li>
</ul>
<p>MLRun iterations can be viewed as child runs under the main task/run. Each child run gets a set of parameters that are computed/selected from the input hyperparameters based on the chosen strategy (<a class="reference external" href="#grid-search-default">Grid</a>, <a class="reference external" href="#list-search">List</a>, <a class="reference external" href="#random-search">Random</a> or <a class="reference external" href="#custom-iterator">Custom</a>).</p>
<p>The different iterations can run in parallel over multiple containers (using Dask or Nuclio runtimes, which manage the workers). Read more in <a class="reference external" href="#parallel-execution-over-containers">Parallel execution over containers</a>.</p>
<p>The hyperparameters and options are specified in the <code class="docutils literal notranslate"><span class="pre">task</span></code> or the <a class="reference internal" href="api/mlrun.runtimes.html#mlrun.runtimes.BaseRuntime.run" title="mlrun.runtimes.BaseRuntime.run"><code class="xref py py-meth docutils literal notranslate"><span class="pre">run()</span></code></a> command
through the <code class="docutils literal notranslate"><span class="pre">hyperparams</span></code> (for hyperparam values) and <code class="docutils literal notranslate"><span class="pre">hyper_param_options</span></code> (for
<a class="reference internal" href="api/mlrun.model.html#mlrun.model.HyperParamOptions" title="mlrun.model.HyperParamOptions"><code class="xref py py-class docutils literal notranslate"><span class="pre">HyperParamOptions</span></code></a>) properties. See the examples below. Hyperparameters can also be loaded directly
from a CSV or Json file (by setting the <code class="docutils literal notranslate"><span class="pre">param_file</span></code> hyper option).</p>
<p>The hyperparams are specified as a struct of <code class="docutils literal notranslate"><span class="pre">key:</span> <span class="pre">list</span></code> values for example: <code class="docutils literal notranslate"><span class="pre">{&quot;p1&quot;:</span> <span class="pre">[1,2,3],</span> <span class="pre">&quot;p2&quot;:</span> <span class="pre">[10,20]}</span></code>. The values
can be of any type (int, string, float, …). The lists are used to compute the parameter combinations using one of the
following strategies:</p>
<ul class="simple">
<li><p><a class="reference external" href="#grid-search-default">Grid search</a> (<code class="docutils literal notranslate"><span class="pre">grid</span></code>) — running all the parameter combinations.</p></li>
<li><p><a class="reference external" href="#random-search">Random</a> (<code class="docutils literal notranslate"><span class="pre">random</span></code>) — running a sampled set from all the parameter combinations.</p></li>
<li><p><a class="reference external" href="#list-search">List</a> (<code class="docutils literal notranslate"><span class="pre">list</span></code>) — running the first parameter from each list followed by the seco2nd from each list and so on. <strong>All the lists must be of equal size</strong>.</p></li>
<li><p><a class="reference external" href="#custom-iterator">Custom</a> (<code class="docutils literal notranslate"><span class="pre">custom</span></code>) — determine the parameter combination per run programmatically.</p></li>
</ul>
<p>You can specify a selection criteria to select the best run among the different child runs by setting the <code class="docutils literal notranslate"><span class="pre">selector</span></code> option. This marks the selected result as the parent (iteration 0) result, and marks the best result in the user interface.</p>
<p>You can also specify the <code class="docutils literal notranslate"><span class="pre">stop_condition</span></code> to stop the execution of child runs when some criteria, based on the returned results, is met (for example <code class="docutils literal notranslate"><span class="pre">stop_condition=&quot;accuracy&gt;=0.9&quot;</span></code>).</p>
<p><strong>In this section</strong></p>
<ul class="simple">
<li><p><a class="reference external" href="#basic-code">Basic code</a></p></li>
<li><p><a class="reference external" href="#Review-the-results">Review the results</a></p></li>
<li><p><a class="reference external" href="#examples">Examples</a></p></li>
<li><p><a class="reference external" href="#parallel-execution-over-containers">Parallel execution over containers</a></p></li>
</ul>
<section id="basic-code">
<h2>Basic code<a class="headerlink" href="#basic-code" title="Permalink to this headline">#</a></h2>
<p>Here’s a basic example of running multiple jobs in parallel for <strong>hyperparameters tuning</strong>, selecting the best run with respect to the <code class="docutils literal notranslate"><span class="pre">max</span> <span class="pre">accuracy</span></code>.</p>
<p>Run the hyperparameters tuning job by using the keywords arguments:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">hyperparams</span></code> for the hyperparameters options and values of choice.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">selector</span></code> for specifying how to select the best model.</p></li>
</ul>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">hp_tuning_run</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">run_function</span><span class="p">(</span>
    <span class="s2">&quot;trainer&quot;</span><span class="p">,</span> 
    <span class="n">inputs</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;dataset&quot;</span><span class="p">:</span> <span class="n">gen_data_run</span><span class="o">.</span><span class="n">outputs</span><span class="p">[</span><span class="s2">&quot;dataset&quot;</span><span class="p">]},</span> 
    <span class="n">hyperparams</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;n_estimators&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">100</span><span class="p">,</span> <span class="mi">500</span><span class="p">,</span> <span class="mi">1000</span><span class="p">],</span> 
        <span class="s2">&quot;max_depth&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">5</span><span class="p">,</span> <span class="mi">15</span><span class="p">,</span> <span class="mi">30</span><span class="p">]</span>
    <span class="p">},</span> 
    <span class="n">selector</span><span class="o">=</span><span class="s2">&quot;max.accuracy&quot;</span><span class="p">,</span> 
    <span class="n">local</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The returned run object in this case represents the <code class="docutils literal notranslate"><span class="pre">parent</span></code> (and the <strong>best</strong> result). You can also access the
individual child runs (called iterations) in the MLRun UI.</p>
</section>
<section id="review-the-results">
<h2>Review the results<a class="headerlink" href="#review-the-results" title="Permalink to this headline">#</a></h2>
<p>When running a hyperparam job, the job <code class="docutils literal notranslate"><span class="pre">results</span></code> tab shows the list and marks the best run:</p>
<a class="reference internal image-reference" href="_images/hyperparam-results.png"><img alt="results" src="_images/hyperparam-results.png" style="width: 800px;" /></a>
<p>You can also view results by printing the artifact <code class="docutils literal notranslate"><span class="pre">iteration_results</span></code>:</p>
<p><code class="docutils literal notranslate"><span class="pre">hp_tuning_run.artifact(&quot;iteration_results&quot;).as_df()</span></code></p>
<p>MLRun also generates a <code class="docutils literal notranslate"><span class="pre">parallel</span> <span class="pre">coordinates</span> <span class="pre">plot</span></code> for the run, you can view it in the MLRun UI.</p>
<p><img alt="parallel_coordinates" src="_images/parallel-coordinates.png" /></p>
</section>
<section id="examples">
<h2>Examples<a class="headerlink" href="#examples" title="Permalink to this headline">#</a></h2>
<p><strong>Base dummy function:</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">mlrun</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&gt; 2021-10-23 12:47:39,982 [warning] Failed resolving version info. Ignoring and using defaults
&gt; 2021-10-23 12:47:43,488 [warning] Unable to parse server or client version. Assuming compatible: {&#39;server_version&#39;: &#39;0.8.0-rc7&#39;, &#39;client_version&#39;: &#39;unstable&#39;}
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">hyper_func</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;p1=</span><span class="si">{</span><span class="n">p1</span><span class="si">}</span><span class="s2">, p2=</span><span class="si">{</span><span class="n">p2</span><span class="si">}</span><span class="s2">, result=</span><span class="si">{</span><span class="n">p1</span> <span class="o">*</span> <span class="n">p2</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">context</span><span class="o">.</span><span class="n">log_result</span><span class="p">(</span><span class="s2">&quot;multiplier&quot;</span><span class="p">,</span> <span class="n">p1</span> <span class="o">*</span> <span class="n">p2</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<section id="grid-search-default">
<h3>Grid search (default)<a class="headerlink" href="#grid-search-default" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">grid_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;p1&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;p2&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">]}</span>
<span class="n">task</span> <span class="o">=</span> <span class="n">mlrun</span><span class="o">.</span><span class="n">new_task</span><span class="p">(</span><span class="s2">&quot;grid-demo&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">with_hyper_params</span><span class="p">(</span><span class="n">grid_params</span><span class="p">,</span> <span class="n">selector</span><span class="o">=</span><span class="s2">&quot;max.multiplier&quot;</span><span class="p">)</span>
<span class="n">run</span> <span class="o">=</span> <span class="n">mlrun</span><span class="o">.</span><span class="n">new_function</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">handler</span><span class="o">=</span><span class="n">hyper_func</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&gt; 2021-10-23 12:47:43,505 [info] starting run grid-demo uid=29c9083db6774e5096a97c9b6b6c8e93 DB=http://mlrun-api:8080
p1=2, p2=10, result=20
p1=4, p2=10, result=40
p1=1, p2=10, result=10
p1=2, p2=20, result=40
p1=4, p2=20, result=80
p1=1, p2=20, result=20
&gt; 2021-10-23 12:47:44,851 [info] best iteration=5, used criteria max.multiplier
</pre></div>
</div>
<div class="output text_html"><style>
.dictlist {
  background-color: #4EC64B;
  text-align: center;
  margin: 4px;
  border-radius: 3px; padding: 0px 3px 1px 3px; display: inline-block;}
.artifact {
  cursor: pointer;
  background-color: #4EC64B;
  text-align: left;
  margin: 4px; border-radius: 3px; padding: 0px 3px 1px 3px; display: inline-block;
}
div.block.hidden {
  display: none;
}
.clickable {
  cursor: pointer;
}
.ellipsis {
  display: inline-block;
  max-width: 60px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.master-wrapper {
  display: flex;
  flex-flow: row nowrap;
  justify-content: flex-start;
  align-items: stretch;
}
.master-tbl {
  flex: 3
}
.master-wrapper > div {
  margin: 4px;
  padding: 10px;
}
iframe.fileview {
  border: 0 none;
  height: 100%;
  width: 100%;
  white-space: pre-wrap;
}
.pane-header-title {
  width: 80%;
  font-weight: 500;
}
.pane-header {
  line-height: 1;
  background-color: #4EC64B;
  padding: 3px;
}
.pane-header .close {
  font-size: 20px;
  font-weight: 700;
  float: right;
  margin-top: -5px;
}
.master-wrapper .right-pane {
  border: 1px inset silver;
  width: 40%;
  min-height: 300px;
  flex: 3
  min-width: 500px;
}
.master-wrapper * {
  box-sizing: border-box;
}
</style><script>
function copyToClipboard(fld) {
    if (document.queryCommandSupported && document.queryCommandSupported('copy')) {
        var textarea = document.createElement('textarea');
        textarea.textContent = fld.innerHTML;
        textarea.style.position = 'fixed';
        document.body.appendChild(textarea);
        textarea.select();

        try {
            return document.execCommand('copy'); // Security exception may be thrown by some browsers.
        } catch (ex) {

        } finally {
            document.body.removeChild(textarea);
        }
    }
}
function expandPanel(el) {
  const panelName = "#" + el.getAttribute('paneName');
  console.log(el.title);

  document.querySelector(panelName + "-title").innerHTML = el.title
  iframe = document.querySelector(panelName + "-body");

  const tblcss = `<style> body { font-family: Arial, Helvetica, sans-serif;}
    #csv { margin-bottom: 15px; }
    #csv table { border-collapse: collapse;}
    #csv table td { padding: 4px 8px; border: 1px solid silver;} </style>`;

  function csvToHtmlTable(str) {
    return '<div id="csv"><table><tr><td>' +  str.replace(/[\n\r]+$/g, '').replace(/[\n\r]+/g, '</td></tr><tr><td>')
      .replace(/,/g, '</td><td>') + '</td></tr></table></div>';
  }

  function reqListener () {
    if (el.title.endsWith(".csv")) {
      iframe.setAttribute("srcdoc", tblcss + csvToHtmlTable(this.responseText));
    } else {
      iframe.setAttribute("srcdoc", this.responseText);
    }
    console.log(this.responseText);
  }

  const oReq = new XMLHttpRequest();
  oReq.addEventListener("load", reqListener);
  oReq.open("GET", el.title);
  oReq.send();


  //iframe.src = el.title;
  const resultPane = document.querySelector(panelName + "-pane");
  if (resultPane.classList.contains("hidden")) {
    resultPane.classList.remove("hidden");
  }
}
function closePanel(el) {
  const panelName = "#" + el.getAttribute('paneName')
  const resultPane = document.querySelector(panelName + "-pane");
  if (!resultPane.classList.contains("hidden")) {
    resultPane.classList.add("hidden");
  }
}

</script>
<div class="master-wrapper">
  <div class="block master-tbl"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>project</th>
      <th>uid</th>
      <th>iter</th>
      <th>start</th>
      <th>state</th>
      <th>name</th>
      <th>labels</th>
      <th>inputs</th>
      <th>parameters</th>
      <th>results</th>
      <th>artifacts</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>default</td>
      <td><div title="29c9083db6774e5096a97c9b6b6c8e93"><a href="https://dashboard.default-tenant.app.yh38.iguazio-cd2.com/mlprojects/default/jobs/monitor/29c9083db6774e5096a97c9b6b6c8e93/overview" target="_blank" >...6b6c8e93</a></div></td>
      <td>0</td>
      <td>Oct 23 12:47:43</td>
      <td>completed</td>
      <td>grid-demo</td>
      <td><div class="dictlist">v3io_user=admin</div><div class="dictlist">kind=handler</div><div class="dictlist">owner=admin</div></td>
      <td></td>
      <td></td>
      <td><div class="dictlist">best_iteration=5</div><div class="dictlist">multiplier=80</div></td>
      <td><div class="artifact" onclick="expandPanel(this)" paneName="resultcfdef132" title="files/v3io/projects/default/artifacts/iteration_results.csv">iteration_results</div></td>
    </tr>
  </tbody>
</table>
</div></div>
  <div id="resultcfdef132-pane" class="right-pane block hidden">
    <div class="pane-header">
      <span id="resultcfdef132-title" class="pane-header-title">Title</span>
      <span onclick="closePanel(this)" paneName="resultcfdef132" class="close clickable">&times;</span>
    </div>
    <iframe class="fileview" id="resultcfdef132-body"></iframe>
  </div>
</div>
</div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><b> > to track results use the .show() or .logs() methods  or <a href="https://dashboard.default-tenant.app.yh38.iguazio-cd2.com/mlprojects/default/jobs/monitor/29c9083db6774e5096a97c9b6b6c8e93/overview" target="_blank">click here</a> to open in UI</b></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&gt; 2021-10-23 12:47:45,071 [info] run executed, status=completed
</pre></div>
</div>
</div>
</div>
<p><strong>UI Screenshot:</strong>
<br><br>
<a class="reference internal" href="_images/hyper-params.png"><img alt="hyper-params" src="_images/hyper-params.png" style="width: 800px;" /></a></p>
</section>
<section id="random-search">
<h3>Random Search<a class="headerlink" href="#random-search" title="Permalink to this headline">#</a></h3>
<p>MLRun chooses random parameter combinations. Limit the number of combinations using the <code class="docutils literal notranslate"><span class="pre">max_iterations</span></code> attribute.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">grid_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;p1&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">3</span><span class="p">],</span> <span class="s2">&quot;p2&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">]}</span>
<span class="n">task</span> <span class="o">=</span> <span class="n">mlrun</span><span class="o">.</span><span class="n">new_task</span><span class="p">(</span><span class="s2">&quot;random-demo&quot;</span><span class="p">)</span>
<span class="n">task</span><span class="o">.</span><span class="n">with_hyper_params</span><span class="p">(</span><span class="n">grid_params</span><span class="p">,</span> <span class="n">selector</span><span class="o">=</span><span class="s2">&quot;max.multiplier&quot;</span><span class="p">,</span> <span class="n">strategy</span><span class="o">=</span><span class="s2">&quot;random&quot;</span><span class="p">,</span> <span class="n">max_iterations</span><span class="o">=</span><span class="mi">4</span><span class="p">)</span>
<span class="n">run</span> <span class="o">=</span> <span class="n">mlrun</span><span class="o">.</span><span class="n">new_function</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">handler</span><span class="o">=</span><span class="n">hyper_func</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&gt; 2021-10-23 12:47:45,077 [info] starting run random-demo uid=cac368c7fc33455f97ca806e5c7abf2f DB=http://mlrun-api:8080
p1=2, p2=20, result=40
p1=4, p2=10, result=40
p1=3, p2=10, result=30
p1=3, p2=20, result=60
&gt; 2021-10-23 12:47:45,966 [info] best iteration=4, used criteria max.multiplier
</pre></div>
</div>
<div class="output text_html"><style>
.dictlist {
  background-color: #4EC64B;
  text-align: center;
  margin: 4px;
  border-radius: 3px; padding: 0px 3px 1px 3px; display: inline-block;}
.artifact {
  cursor: pointer;
  background-color: #4EC64B;
  text-align: left;
  margin: 4px; border-radius: 3px; padding: 0px 3px 1px 3px; display: inline-block;
}
div.block.hidden {
  display: none;
}
.clickable {
  cursor: pointer;
}
.ellipsis {
  display: inline-block;
  max-width: 60px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.master-wrapper {
  display: flex;
  flex-flow: row nowrap;
  justify-content: flex-start;
  align-items: stretch;
}
.master-tbl {
  flex: 3
}
.master-wrapper > div {
  margin: 4px;
  padding: 10px;
}
iframe.fileview {
  border: 0 none;
  height: 100%;
  width: 100%;
  white-space: pre-wrap;
}
.pane-header-title {
  width: 80%;
  font-weight: 500;
}
.pane-header {
  line-height: 1;
  background-color: #4EC64B;
  padding: 3px;
}
.pane-header .close {
  font-size: 20px;
  font-weight: 700;
  float: right;
  margin-top: -5px;
}
.master-wrapper .right-pane {
  border: 1px inset silver;
  width: 40%;
  min-height: 300px;
  flex: 3
  min-width: 500px;
}
.master-wrapper * {
  box-sizing: border-box;
}
</style><script>
function copyToClipboard(fld) {
    if (document.queryCommandSupported && document.queryCommandSupported('copy')) {
        var textarea = document.createElement('textarea');
        textarea.textContent = fld.innerHTML;
        textarea.style.position = 'fixed';
        document.body.appendChild(textarea);
        textarea.select();

        try {
            return document.execCommand('copy'); // Security exception may be thrown by some browsers.
        } catch (ex) {

        } finally {
            document.body.removeChild(textarea);
        }
    }
}
function expandPanel(el) {
  const panelName = "#" + el.getAttribute('paneName');
  console.log(el.title);

  document.querySelector(panelName + "-title").innerHTML = el.title
  iframe = document.querySelector(panelName + "-body");

  const tblcss = `<style> body { font-family: Arial, Helvetica, sans-serif;}
    #csv { margin-bottom: 15px; }
    #csv table { border-collapse: collapse;}
    #csv table td { padding: 4px 8px; border: 1px solid silver;} </style>`;

  function csvToHtmlTable(str) {
    return '<div id="csv"><table><tr><td>' +  str.replace(/[\n\r]+$/g, '').replace(/[\n\r]+/g, '</td></tr><tr><td>')
      .replace(/,/g, '</td><td>') + '</td></tr></table></div>';
  }

  function reqListener () {
    if (el.title.endsWith(".csv")) {
      iframe.setAttribute("srcdoc", tblcss + csvToHtmlTable(this.responseText));
    } else {
      iframe.setAttribute("srcdoc", this.responseText);
    }
    console.log(this.responseText);
  }

  const oReq = new XMLHttpRequest();
  oReq.addEventListener("load", reqListener);
  oReq.open("GET", el.title);
  oReq.send();


  //iframe.src = el.title;
  const resultPane = document.querySelector(panelName + "-pane");
  if (resultPane.classList.contains("hidden")) {
    resultPane.classList.remove("hidden");
  }
}
function closePanel(el) {
  const panelName = "#" + el.getAttribute('paneName')
  const resultPane = document.querySelector(panelName + "-pane");
  if (!resultPane.classList.contains("hidden")) {
    resultPane.classList.add("hidden");
  }
}

</script>
<div class="master-wrapper">
  <div class="block master-tbl"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>project</th>
      <th>uid</th>
      <th>iter</th>
      <th>start</th>
      <th>state</th>
      <th>name</th>
      <th>labels</th>
      <th>inputs</th>
      <th>parameters</th>
      <th>results</th>
      <th>artifacts</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>default</td>
      <td><div title="cac368c7fc33455f97ca806e5c7abf2f"><a href="https://dashboard.default-tenant.app.yh38.iguazio-cd2.com/mlprojects/default/jobs/monitor/cac368c7fc33455f97ca806e5c7abf2f/overview" target="_blank" >...5c7abf2f</a></div></td>
      <td>0</td>
      <td>Oct 23 12:47:45</td>
      <td>completed</td>
      <td>random-demo</td>
      <td><div class="dictlist">v3io_user=admin</div><div class="dictlist">kind=handler</div><div class="dictlist">owner=admin</div></td>
      <td></td>
      <td></td>
      <td><div class="dictlist">best_iteration=4</div><div class="dictlist">multiplier=60</div></td>
      <td><div class="artifact" onclick="expandPanel(this)" paneName="result5d3a14cb" title="files/v3io/projects/default/artifacts/iteration_results.csv">iteration_results</div></td>
    </tr>
  </tbody>
</table>
</div></div>
  <div id="result5d3a14cb-pane" class="right-pane block hidden">
    <div class="pane-header">
      <span id="result5d3a14cb-title" class="pane-header-title">Title</span>
      <span onclick="closePanel(this)" paneName="result5d3a14cb" class="close clickable">&times;</span>
    </div>
    <iframe class="fileview" id="result5d3a14cb-body"></iframe>
  </div>
</div>
</div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><b> > to track results use the .show() or .logs() methods  or <a href="https://dashboard.default-tenant.app.yh38.iguazio-cd2.com/mlprojects/default/jobs/monitor/cac368c7fc33455f97ca806e5c7abf2f/overview" target="_blank">click here</a> to open in UI</b></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&gt; 2021-10-23 12:47:46,177 [info] run executed, status=completed
</pre></div>
</div>
</div>
</div>
</section>
<section id="list-search">
<h3>List search<a class="headerlink" href="#list-search" title="Permalink to this headline">#</a></h3>
<p>This example also shows how to use the <code class="docutils literal notranslate"><span class="pre">stop_condition</span></code> option.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">list_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;p1&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">3</span><span class="p">,</span><span class="mi">7</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">5</span><span class="p">],</span> <span class="s2">&quot;p2&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">15</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">,</span><span class="mi">30</span><span class="p">]}</span>
<span class="n">task</span> <span class="o">=</span> <span class="n">mlrun</span><span class="o">.</span><span class="n">new_task</span><span class="p">(</span><span class="s2">&quot;list-demo&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">with_hyper_params</span><span class="p">(</span>
    <span class="n">list_params</span><span class="p">,</span> <span class="n">selector</span><span class="o">=</span><span class="s2">&quot;max.multiplier&quot;</span><span class="p">,</span> <span class="n">strategy</span><span class="o">=</span><span class="s2">&quot;list&quot;</span><span class="p">,</span> <span class="n">stop_condition</span><span class="o">=</span><span class="s2">&quot;multiplier&gt;=70&quot;</span><span class="p">)</span>
<span class="n">run</span> <span class="o">=</span> <span class="n">mlrun</span><span class="o">.</span><span class="n">new_function</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">handler</span><span class="o">=</span><span class="n">hyper_func</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&gt; 2021-10-23 12:47:46,184 [info] starting run list-demo uid=136edfb9c9404a61933c73bbbd35b18b DB=http://mlrun-api:8080
p1=2, p2=15, result=30
p1=3, p2=10, result=30
p1=7, p2=10, result=70
&gt; 2021-10-23 12:47:47,193 [info] reached early stop condition (multiplier&gt;=70), stopping iterations!
&gt; 2021-10-23 12:47:47,195 [info] best iteration=3, used criteria max.multiplier
</pre></div>
</div>
<div class="output text_html"><style>
.dictlist {
  background-color: #4EC64B;
  text-align: center;
  margin: 4px;
  border-radius: 3px; padding: 0px 3px 1px 3px; display: inline-block;}
.artifact {
  cursor: pointer;
  background-color: #4EC64B;
  text-align: left;
  margin: 4px; border-radius: 3px; padding: 0px 3px 1px 3px; display: inline-block;
}
div.block.hidden {
  display: none;
}
.clickable {
  cursor: pointer;
}
.ellipsis {
  display: inline-block;
  max-width: 60px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.master-wrapper {
  display: flex;
  flex-flow: row nowrap;
  justify-content: flex-start;
  align-items: stretch;
}
.master-tbl {
  flex: 3
}
.master-wrapper > div {
  margin: 4px;
  padding: 10px;
}
iframe.fileview {
  border: 0 none;
  height: 100%;
  width: 100%;
  white-space: pre-wrap;
}
.pane-header-title {
  width: 80%;
  font-weight: 500;
}
.pane-header {
  line-height: 1;
  background-color: #4EC64B;
  padding: 3px;
}
.pane-header .close {
  font-size: 20px;
  font-weight: 700;
  float: right;
  margin-top: -5px;
}
.master-wrapper .right-pane {
  border: 1px inset silver;
  width: 40%;
  min-height: 300px;
  flex: 3
  min-width: 500px;
}
.master-wrapper * {
  box-sizing: border-box;
}
</style><script>
function copyToClipboard(fld) {
    if (document.queryCommandSupported && document.queryCommandSupported('copy')) {
        var textarea = document.createElement('textarea');
        textarea.textContent = fld.innerHTML;
        textarea.style.position = 'fixed';
        document.body.appendChild(textarea);
        textarea.select();

        try {
            return document.execCommand('copy'); // Security exception may be thrown by some browsers.
        } catch (ex) {

        } finally {
            document.body.removeChild(textarea);
        }
    }
}
function expandPanel(el) {
  const panelName = "#" + el.getAttribute('paneName');
  console.log(el.title);

  document.querySelector(panelName + "-title").innerHTML = el.title
  iframe = document.querySelector(panelName + "-body");

  const tblcss = `<style> body { font-family: Arial, Helvetica, sans-serif;}
    #csv { margin-bottom: 15px; }
    #csv table { border-collapse: collapse;}
    #csv table td { padding: 4px 8px; border: 1px solid silver;} </style>`;

  function csvToHtmlTable(str) {
    return '<div id="csv"><table><tr><td>' +  str.replace(/[\n\r]+$/g, '').replace(/[\n\r]+/g, '</td></tr><tr><td>')
      .replace(/,/g, '</td><td>') + '</td></tr></table></div>';
  }

  function reqListener () {
    if (el.title.endsWith(".csv")) {
      iframe.setAttribute("srcdoc", tblcss + csvToHtmlTable(this.responseText));
    } else {
      iframe.setAttribute("srcdoc", this.responseText);
    }
    console.log(this.responseText);
  }

  const oReq = new XMLHttpRequest();
  oReq.addEventListener("load", reqListener);
  oReq.open("GET", el.title);
  oReq.send();


  //iframe.src = el.title;
  const resultPane = document.querySelector(panelName + "-pane");
  if (resultPane.classList.contains("hidden")) {
    resultPane.classList.remove("hidden");
  }
}
function closePanel(el) {
  const panelName = "#" + el.getAttribute('paneName')
  const resultPane = document.querySelector(panelName + "-pane");
  if (!resultPane.classList.contains("hidden")) {
    resultPane.classList.add("hidden");
  }
}

</script>
<div class="master-wrapper">
  <div class="block master-tbl"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>project</th>
      <th>uid</th>
      <th>iter</th>
      <th>start</th>
      <th>state</th>
      <th>name</th>
      <th>labels</th>
      <th>inputs</th>
      <th>parameters</th>
      <th>results</th>
      <th>artifacts</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>default</td>
      <td><div title="136edfb9c9404a61933c73bbbd35b18b"><a href="https://dashboard.default-tenant.app.yh38.iguazio-cd2.com/mlprojects/default/jobs/monitor/136edfb9c9404a61933c73bbbd35b18b/overview" target="_blank" >...bd35b18b</a></div></td>
      <td>0</td>
      <td>Oct 23 12:47:46</td>
      <td>completed</td>
      <td>list-demo</td>
      <td><div class="dictlist">v3io_user=admin</div><div class="dictlist">kind=handler</div><div class="dictlist">owner=admin</div></td>
      <td></td>
      <td></td>
      <td><div class="dictlist">best_iteration=3</div><div class="dictlist">multiplier=70</div></td>
      <td><div class="artifact" onclick="expandPanel(this)" paneName="result76e1b9ba" title="files/v3io/projects/default/artifacts/iteration_results.csv">iteration_results</div></td>
    </tr>
  </tbody>
</table>
</div></div>
  <div id="result76e1b9ba-pane" class="right-pane block hidden">
    <div class="pane-header">
      <span id="result76e1b9ba-title" class="pane-header-title">Title</span>
      <span onclick="closePanel(this)" paneName="result76e1b9ba" class="close clickable">&times;</span>
    </div>
    <iframe class="fileview" id="result76e1b9ba-body"></iframe>
  </div>
</div>
</div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><b> > to track results use the .show() or .logs() methods  or <a href="https://dashboard.default-tenant.app.yh38.iguazio-cd2.com/mlprojects/default/jobs/monitor/136edfb9c9404a61933c73bbbd35b18b/overview" target="_blank">click here</a> to open in UI</b></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&gt; 2021-10-23 12:47:47,385 [info] run executed, status=completed
</pre></div>
</div>
</div>
</div>
</section>
<section id="custom-iterator">
<h3>Custom iterator<a class="headerlink" href="#custom-iterator" title="Permalink to this headline">#</a></h3>
<p>You can define a child iteration context under the parent/main run. The child run is logged independently.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">handler</span><span class="p">(</span><span class="n">context</span><span class="p">:</span> <span class="n">mlrun</span><span class="o">.</span><span class="n">MLClientCtx</span><span class="p">,</span> <span class="n">param_list</span><span class="p">):</span>
    <span class="n">best_multiplier</span> <span class="o">=</span> <span class="n">total</span> <span class="o">=</span> <span class="mi">0</span>
    <span class="k">for</span> <span class="n">param</span> <span class="ow">in</span> <span class="n">param_list</span><span class="p">:</span>
        <span class="k">with</span> <span class="n">context</span><span class="o">.</span><span class="n">get_child_context</span><span class="p">(</span><span class="o">**</span><span class="n">param</span><span class="p">)</span> <span class="k">as</span> <span class="n">child</span><span class="p">:</span>
            <span class="n">hyper_func</span><span class="p">(</span><span class="n">child</span><span class="p">,</span> <span class="o">**</span><span class="n">child</span><span class="o">.</span><span class="n">parameters</span><span class="p">)</span>
            <span class="n">multiplier</span> <span class="o">=</span> <span class="n">child</span><span class="o">.</span><span class="n">results</span><span class="p">[</span><span class="s1">&#39;multiplier&#39;</span><span class="p">]</span>
            <span class="n">total</span> <span class="o">+=</span> <span class="n">multiplier</span>
            <span class="k">if</span> <span class="n">multiplier</span> <span class="o">&gt;</span> <span class="n">best_multiplier</span><span class="p">:</span>
                <span class="n">child</span><span class="o">.</span><span class="n">mark_as_best</span><span class="p">()</span>
                <span class="n">best_multiplier</span> <span class="o">=</span> <span class="n">multiplier</span>

    <span class="c1"># log result at the parent</span>
    <span class="n">context</span><span class="o">.</span><span class="n">log_result</span><span class="p">(</span><span class="s1">&#39;avg_multiplier&#39;</span><span class="p">,</span> <span class="n">total</span> <span class="o">/</span> <span class="nb">len</span><span class="p">(</span><span class="n">param_list</span><span class="p">))</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">param_list</span> <span class="o">=</span> <span class="p">[{</span><span class="s2">&quot;p1&quot;</span><span class="p">:</span><span class="mi">2</span><span class="p">,</span> <span class="s2">&quot;p2&quot;</span><span class="p">:</span><span class="mi">10</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;p1&quot;</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="s2">&quot;p2&quot;</span><span class="p">:</span><span class="mi">30</span><span class="p">},</span> <span class="p">{</span><span class="s2">&quot;p1&quot;</span><span class="p">:</span><span class="mi">4</span><span class="p">,</span> <span class="s2">&quot;p2&quot;</span><span class="p">:</span><span class="mi">7</span><span class="p">}]</span>
<span class="n">run</span> <span class="o">=</span> <span class="n">mlrun</span><span class="o">.</span><span class="n">new_function</span><span class="p">()</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">handler</span><span class="o">=</span><span class="n">handler</span><span class="p">,</span> <span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;param_list&quot;</span><span class="p">:</span> <span class="n">param_list</span><span class="p">})</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&gt; 2021-10-23 12:47:47,403 [info] starting run mlrun-a79c5c-handler uid=c3eb08ebae02464ca4025c77b12e3c39 DB=http://mlrun-api:8080
p1=2, p2=10, result=20
p1=3, p2=30, result=90
p1=4, p2=7, result=28
</pre></div>
</div>
<div class="output text_html"><style>
.dictlist {
  background-color: #4EC64B;
  text-align: center;
  margin: 4px;
  border-radius: 3px; padding: 0px 3px 1px 3px; display: inline-block;}
.artifact {
  cursor: pointer;
  background-color: #4EC64B;
  text-align: left;
  margin: 4px; border-radius: 3px; padding: 0px 3px 1px 3px; display: inline-block;
}
div.block.hidden {
  display: none;
}
.clickable {
  cursor: pointer;
}
.ellipsis {
  display: inline-block;
  max-width: 60px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.master-wrapper {
  display: flex;
  flex-flow: row nowrap;
  justify-content: flex-start;
  align-items: stretch;
}
.master-tbl {
  flex: 3
}
.master-wrapper > div {
  margin: 4px;
  padding: 10px;
}
iframe.fileview {
  border: 0 none;
  height: 100%;
  width: 100%;
  white-space: pre-wrap;
}
.pane-header-title {
  width: 80%;
  font-weight: 500;
}
.pane-header {
  line-height: 1;
  background-color: #4EC64B;
  padding: 3px;
}
.pane-header .close {
  font-size: 20px;
  font-weight: 700;
  float: right;
  margin-top: -5px;
}
.master-wrapper .right-pane {
  border: 1px inset silver;
  width: 40%;
  min-height: 300px;
  flex: 3
  min-width: 500px;
}
.master-wrapper * {
  box-sizing: border-box;
}
</style><script>
function copyToClipboard(fld) {
    if (document.queryCommandSupported && document.queryCommandSupported('copy')) {
        var textarea = document.createElement('textarea');
        textarea.textContent = fld.innerHTML;
        textarea.style.position = 'fixed';
        document.body.appendChild(textarea);
        textarea.select();

        try {
            return document.execCommand('copy'); // Security exception may be thrown by some browsers.
        } catch (ex) {

        } finally {
            document.body.removeChild(textarea);
        }
    }
}
function expandPanel(el) {
  const panelName = "#" + el.getAttribute('paneName');
  console.log(el.title);

  document.querySelector(panelName + "-title").innerHTML = el.title
  iframe = document.querySelector(panelName + "-body");

  const tblcss = `<style> body { font-family: Arial, Helvetica, sans-serif;}
    #csv { margin-bottom: 15px; }
    #csv table { border-collapse: collapse;}
    #csv table td { padding: 4px 8px; border: 1px solid silver;} </style>`;

  function csvToHtmlTable(str) {
    return '<div id="csv"><table><tr><td>' +  str.replace(/[\n\r]+$/g, '').replace(/[\n\r]+/g, '</td></tr><tr><td>')
      .replace(/,/g, '</td><td>') + '</td></tr></table></div>';
  }

  function reqListener () {
    if (el.title.endsWith(".csv")) {
      iframe.setAttribute("srcdoc", tblcss + csvToHtmlTable(this.responseText));
    } else {
      iframe.setAttribute("srcdoc", this.responseText);
    }
    console.log(this.responseText);
  }

  const oReq = new XMLHttpRequest();
  oReq.addEventListener("load", reqListener);
  oReq.open("GET", el.title);
  oReq.send();


  //iframe.src = el.title;
  const resultPane = document.querySelector(panelName + "-pane");
  if (resultPane.classList.contains("hidden")) {
    resultPane.classList.remove("hidden");
  }
}
function closePanel(el) {
  const panelName = "#" + el.getAttribute('paneName')
  const resultPane = document.querySelector(panelName + "-pane");
  if (!resultPane.classList.contains("hidden")) {
    resultPane.classList.add("hidden");
  }
}

</script>
<div class="master-wrapper">
  <div class="block master-tbl"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>project</th>
      <th>uid</th>
      <th>iter</th>
      <th>start</th>
      <th>state</th>
      <th>name</th>
      <th>labels</th>
      <th>inputs</th>
      <th>parameters</th>
      <th>results</th>
      <th>artifacts</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>default</td>
      <td><div title="c3eb08ebae02464ca4025c77b12e3c39"><a href="https://dashboard.default-tenant.app.yh38.iguazio-cd2.com/mlprojects/default/jobs/monitor/c3eb08ebae02464ca4025c77b12e3c39/overview" target="_blank" >...b12e3c39</a></div></td>
      <td>0</td>
      <td>Oct 23 12:47:47</td>
      <td>completed</td>
      <td>mlrun-a79c5c-handler</td>
      <td><div class="dictlist">v3io_user=admin</div><div class="dictlist">kind=handler</div><div class="dictlist">owner=admin</div><div class="dictlist">host=jupyter-6476bb5f85-bjc4m</div></td>
      <td></td>
      <td><div class="dictlist">param_list=[{'p1': 2, 'p2': 10}, {'p1': 3, 'p2': 30}, {'p1': 4, 'p2': 7}]</div></td>
      <td><div class="dictlist">best_iteration=2</div><div class="dictlist">multiplier=90</div><div class="dictlist">avg_multiplier=46.0</div></td>
      <td></td>
    </tr>
  </tbody>
</table>
</div></div>
  <div id="result50355e5c-pane" class="right-pane block hidden">
    <div class="pane-header">
      <span id="result50355e5c-title" class="pane-header-title">Title</span>
      <span onclick="closePanel(this)" paneName="result50355e5c" class="close clickable">&times;</span>
    </div>
    <iframe class="fileview" id="result50355e5c-body"></iframe>
  </div>
</div>
</div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><b> > to track results use the .show() or .logs() methods  or <a href="https://dashboard.default-tenant.app.yh38.iguazio-cd2.com/mlprojects/default/jobs/monitor/c3eb08ebae02464ca4025c77b12e3c39/overview" target="_blank">click here</a> to open in UI</b></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&gt; 2021-10-23 12:47:48,734 [info] run executed, status=completed
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="parallel-execution-over-containers">
<h2>Parallel execution over containers<a class="headerlink" href="#parallel-execution-over-containers" title="Permalink to this headline">#</a></h2>
<p>When working with compute intensive or long running tasks you’ll want to run your iterations over a cluster of containers. At the same time, you don’t want to bring up too many containers, and you want to limit the number of parallel tasks.</p>
<p>MLRun supports distribution of the child runs over Dask or Nuclio clusters. This is handled automatically by MLRun. You only need to deploy the Dask or Nuclio function used by the workers, and set the level of parallelism in the task. The execution can be controlled from the client/notebook, or can have a job (immediate or scheduled) that controls the execution.</p>
<section id="code-example-single-task">
<h3>Code example (single task)<a class="headerlink" href="#code-example-single-task" title="Permalink to this headline">#</a></h3>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># mark the start of a code section that will be sent to the job</span>
<span class="c1"># mlrun: start-code</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">socket</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="k">def</span> <span class="nf">hyper_func2</span><span class="p">(</span><span class="n">context</span><span class="p">,</span> <span class="n">data</span><span class="p">,</span> <span class="n">p1</span><span class="p">,</span> <span class="n">p2</span><span class="p">,</span> <span class="n">p3</span><span class="p">):</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">data</span><span class="o">.</span><span class="n">as_df</span><span class="p">()</span><span class="o">.</span><span class="n">head</span><span class="p">())</span>
    <span class="n">context</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;p2=</span><span class="si">{</span><span class="n">p2</span><span class="si">}</span><span class="s2">, p3=</span><span class="si">{</span><span class="n">p3</span><span class="si">}</span><span class="s2">, r1=</span><span class="si">{</span><span class="n">p2</span> <span class="o">*</span> <span class="n">p3</span><span class="si">}</span><span class="s2"> at </span><span class="si">{</span><span class="n">socket</span><span class="o">.</span><span class="n">gethostname</span><span class="p">()</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
    <span class="n">context</span><span class="o">.</span><span class="n">log_result</span><span class="p">(</span><span class="s2">&quot;r1&quot;</span><span class="p">,</span> <span class="n">p2</span> <span class="o">*</span> <span class="n">p3</span><span class="p">)</span>
    <span class="n">raw_data</span> <span class="o">=</span> <span class="p">{</span>
        <span class="s2">&quot;first_name&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;Jason&quot;</span><span class="p">,</span> <span class="s2">&quot;Molly&quot;</span><span class="p">,</span> <span class="s2">&quot;Tina&quot;</span><span class="p">,</span> <span class="s2">&quot;Jake&quot;</span><span class="p">,</span> <span class="s2">&quot;Amy&quot;</span><span class="p">],</span>
        <span class="s2">&quot;age&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">42</span><span class="p">,</span> <span class="mi">52</span><span class="p">,</span> <span class="mi">36</span><span class="p">,</span> <span class="mi">24</span><span class="p">,</span> <span class="mi">73</span><span class="p">],</span>
        <span class="s2">&quot;testScore&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">25</span><span class="p">,</span> <span class="mi">94</span><span class="p">,</span> <span class="mi">57</span><span class="p">,</span> <span class="mi">62</span><span class="p">,</span> <span class="mi">70</span><span class="p">],</span>
    <span class="p">}</span>
    <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">(</span><span class="n">raw_data</span><span class="p">,</span> <span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s2">&quot;first_name&quot;</span><span class="p">,</span> <span class="s2">&quot;age&quot;</span><span class="p">,</span> <span class="s2">&quot;testScore&quot;</span><span class="p">])</span>
    <span class="n">context</span><span class="o">.</span><span class="n">log_dataset</span><span class="p">(</span><span class="s2">&quot;mydf&quot;</span><span class="p">,</span> <span class="n">df</span><span class="o">=</span><span class="n">df</span><span class="p">,</span> <span class="n">stats</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># mlrun: end-code</span>
</pre></div>
</div>
</div>
</div>
</section>
<section id="running-the-workers-using-dask">
<h3>Running the workers using Dask<a class="headerlink" href="#running-the-workers-using-dask" title="Permalink to this headline">#</a></h3>
<p>This example creates a new function and executes the parent/controller as an MLRun <code class="docutils literal notranslate"><span class="pre">job</span></code> and the different child runs over a Dask cluster (MLRun Dask function).</p>
<section id="define-a-dask-cluster-using-mlrun-serverless-dask">
<h4>Define a Dask cluster (using MLRun serverless Dask)<a class="headerlink" href="#define-a-dask-cluster-using-mlrun-serverless-dask" title="Permalink to this headline">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dask_cluster</span> <span class="o">=</span> <span class="n">mlrun</span><span class="o">.</span><span class="n">new_function</span><span class="p">(</span><span class="s2">&quot;dask-cluster&quot;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;dask&#39;</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="s1">&#39;mlrun/ml-models&#39;</span><span class="p">)</span>
<span class="n">dask_cluster</span><span class="o">.</span><span class="n">apply</span><span class="p">(</span><span class="n">mlrun</span><span class="o">.</span><span class="n">mount_v3io</span><span class="p">())</span>        <span class="c1"># add volume mounts</span>
<span class="n">dask_cluster</span><span class="o">.</span><span class="n">spec</span><span class="o">.</span><span class="n">service_type</span> <span class="o">=</span> <span class="s2">&quot;NodePort&quot;</span>   <span class="c1"># open interface to the dask UI dashboard</span>
<span class="n">dask_cluster</span><span class="o">.</span><span class="n">spec</span><span class="o">.</span><span class="n">replicas</span> <span class="o">=</span> <span class="mi">2</span>                <span class="c1"># define two containers</span>
<span class="n">uri</span> <span class="o">=</span> <span class="n">dask_cluster</span><span class="o">.</span><span class="n">save</span><span class="p">()</span>
<span class="n">uri</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;db://default/dask-cluster&#39;
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># initialize the dask cluster and get its dashboard url</span>
<span class="n">dask_cluster</span><span class="o">.</span><span class="n">client</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&gt; 2021-10-23 12:48:49,020 [info] trying dask client at: tcp://mlrun-dask-cluster-eea516ff-5.default-tenant:8786
&gt; 2021-10-23 12:48:49,049 [info] using remote dask scheduler (mlrun-dask-cluster-eea516ff-5) at: tcp://mlrun-dask-cluster-eea516ff-5.default-tenant:8786
</pre></div>
</div>
<div class="output stderr highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>Mismatched versions found

+-------------+--------+-----------+---------+
| Package     | client | scheduler | workers |
+-------------+--------+-----------+---------+
| blosc       | 1.7.0  | 1.10.6    | None    |
| cloudpickle | 1.6.0  | 2.0.0     | None    |
| distributed | 2.30.0 | 2.30.1    | None    |
| lz4         | 3.1.0  | 3.1.3     | None    |
| msgpack     | 1.0.0  | 1.0.2     | None    |
| tornado     | 6.0.4  | 6.1       | None    |
+-------------+--------+-----------+---------+
Notes: 
-  msgpack: Variation is ok, as long as everything is above 0.6
</pre></div>
</div>
<div class="output text_html"><a href="http://default-tenant.app.yh38.iguazio-cd2.com:31350/status" target="_blank" >dashboard link: default-tenant.app.yh38.iguazio-cd2.com:31350</a></div><div class="output text_html"><table style="border: 2px solid white;">
<tr>
<td style="vertical-align: top; border: 0px solid white">
<h3 style="text-align: left;">Client</h3>
<ul style="text-align: left; list-style: none; margin: 0; padding: 0;">
  <li><b>Scheduler: </b>tcp://mlrun-dask-cluster-eea516ff-5.default-tenant:8786</li>
  <li><b>Dashboard: </b><a href='http://mlrun-dask-cluster-eea516ff-5.default-tenant:8787/status' target='_blank'>http://mlrun-dask-cluster-eea516ff-5.default-tenant:8787/status</a></li>
</ul>
</td>
<td style="vertical-align: top; border: 0px solid white">
<h3 style="text-align: left;">Cluster</h3>
<ul style="text-align: left; list-style:none; margin: 0; padding: 0;">
  <li><b>Workers: </b>0</li>
  <li><b>Cores: </b>0</li>
  <li><b>Memory: </b>0 B</li>
</ul>
</td>
</tr>
</table></div></div>
</div>
</section>
<section id="define-the-parallel-work">
<h4>Define the parallel work<a class="headerlink" href="#define-the-parallel-work" title="Permalink to this headline">#</a></h4>
<p>Set the <code class="docutils literal notranslate"><span class="pre">parallel_runs</span></code> attribute to indicate how many child tasks to run in parallel. Set the <code class="docutils literal notranslate"><span class="pre">dask_cluster_uri</span></code> to point
to the dask cluster (if it’s not set the cluster uri uses dask local). You can also set the <code class="docutils literal notranslate"><span class="pre">teardown_dask</span></code> flag to free up
all the dask resources after completion.</p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">grid_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;p2&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;p3&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">]}</span>
<span class="n">task</span> <span class="o">=</span> <span class="n">mlrun</span><span class="o">.</span><span class="n">new_task</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;p1&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">},</span> <span class="n">inputs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="s1">&#39;https://s3.wasabisys.com/iguazio/data/iris/iris_dataset.csv&#39;</span><span class="p">})</span>
<span class="n">task</span><span class="o">.</span><span class="n">with_hyper_params</span><span class="p">(</span>
    <span class="n">grid_params</span><span class="p">,</span> <span class="n">selector</span><span class="o">=</span><span class="s2">&quot;r1&quot;</span><span class="p">,</span> <span class="n">strategy</span><span class="o">=</span><span class="s2">&quot;grid&quot;</span><span class="p">,</span> <span class="n">parallel_runs</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">dask_cluster_uri</span><span class="o">=</span><span class="n">uri</span><span class="p">,</span> <span class="n">teardown_dask</span><span class="o">=</span><span class="kc">True</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&lt;mlrun.model.RunTemplate at 0x7f673d7b1910&gt;
</pre></div>
</div>
</div>
</div>
<p><strong>Define a job that will take the code (using <code class="docutils literal notranslate"><span class="pre">code_to_function</span></code>) and run it over the cluster</strong></p>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fn</span> <span class="o">=</span> <span class="n">mlrun</span><span class="o">.</span><span class="n">code_to_function</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;hyper-tst&#39;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;job&#39;</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="s1">&#39;mlrun/ml-models&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">run</span> <span class="o">=</span> <span class="n">fn</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">handler</span><span class="o">=</span><span class="n">hyper_func2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&gt; 2021-10-23 12:49:56,388 [info] starting run hyper-tst-hyper_func2 uid=50eb72f5b0734954b8b1c57494f325bc DB=http://mlrun-api:8080
&gt; 2021-10-23 12:49:56,565 [info] Job is running in the background, pod: hyper-tst-hyper-func2-9g6z8
&gt; 2021-10-23 12:49:59,813 [info] trying dask client at: tcp://mlrun-dask-cluster-eea516ff-5.default-tenant:8786
&gt; 2021-10-23 12:50:09,828 [warning] remote scheduler at tcp://mlrun-dask-cluster-eea516ff-5.default-tenant:8786 not ready, will try to restart Timed out trying to connect to tcp://mlrun-dask-cluster-eea516ff-5.default-tenant:8786 after 10 s
&gt; 2021-10-23 12:50:15,733 [info] using remote dask scheduler (mlrun-dask-cluster-04574796-5) at: tcp://mlrun-dask-cluster-04574796-5.default-tenant:8786
remote dashboard: default-tenant.app.yh38.iguazio-cd2.com:32577
&gt; --------------- Iteration: (1) ---------------
   sepal length (cm)  sepal width (cm)  ...  petal width (cm)  label
0                5.1               3.5  ...               0.2      0
1                4.9               3.0  ...               0.2      0
2                4.7               3.2  ...               0.2      0
3                4.6               3.1  ...               0.2      0
4                5.0               3.6  ...               0.2      0

[5 rows x 5 columns]
&gt; 2021-10-23 12:50:21,353 [info] p2=2, p3=10, r1=20 at mlrun-dask-cluster-04574796-5k5lhq

&gt; --------------- Iteration: (3) ---------------
   sepal length (cm)  sepal width (cm)  ...  petal width (cm)  label
0                5.1               3.5  ...               0.2      0
1                4.9               3.0  ...               0.2      0
2                4.7               3.2  ...               0.2      0
3                4.6               3.1  ...               0.2      0
4                5.0               3.6  ...               0.2      0

[5 rows x 5 columns]
&gt; 2021-10-23 12:50:21,459 [info] p2=4, p3=10, r1=40 at mlrun-dask-cluster-04574796-5k5lhq

&gt; --------------- Iteration: (4) ---------------
   sepal length (cm)  sepal width (cm)  ...  petal width (cm)  label
0                5.1               3.5  ...               0.2      0
1                4.9               3.0  ...               0.2      0
2                4.7               3.2  ...               0.2      0
3                4.6               3.1  ...               0.2      0
4                5.0               3.6  ...               0.2      0

[5 rows x 5 columns]
&gt; 2021-10-23 12:50:21,542 [info] p2=1, p3=10, r1=10 at mlrun-dask-cluster-04574796-5k5lhq

&gt; --------------- Iteration: (6) ---------------
   sepal length (cm)  sepal width (cm)  ...  petal width (cm)  label
0                5.1               3.5  ...               0.2      0
1                4.9               3.0  ...               0.2      0
2                4.7               3.2  ...               0.2      0
3                4.6               3.1  ...               0.2      0
4                5.0               3.6  ...               0.2      0

[5 rows x 5 columns]
&gt; 2021-10-23 12:50:21,629 [info] p2=1, p3=20, r1=20 at mlrun-dask-cluster-04574796-5k5lhq

&gt; --------------- Iteration: (7) ---------------
   sepal length (cm)  sepal width (cm)  ...  petal width (cm)  label
0                5.1               3.5  ...               0.2      0
1                4.9               3.0  ...               0.2      0
2                4.7               3.2  ...               0.2      0
3                4.6               3.1  ...               0.2      0
4                5.0               3.6  ...               0.2      0

[5 rows x 5 columns]
&gt; 2021-10-23 12:50:21,792 [info] p2=4, p3=20, r1=80 at mlrun-dask-cluster-04574796-5k5lhq

&gt; --------------- Iteration: (8) ---------------
   sepal length (cm)  sepal width (cm)  ...  petal width (cm)  label
0                5.1               3.5  ...               0.2      0
1                4.9               3.0  ...               0.2      0
2                4.7               3.2  ...               0.2      0
3                4.6               3.1  ...               0.2      0
4                5.0               3.6  ...               0.2      0

[5 rows x 5 columns]
&gt; 2021-10-23 12:50:22,052 [info] p2=1, p3=20, r1=20 at mlrun-dask-cluster-04574796-5k5lhq

&gt; --------------- Iteration: (2) ---------------
   sepal length (cm)  sepal width (cm)  ...  petal width (cm)  label
0                5.1               3.5  ...               0.2      0
1                4.9               3.0  ...               0.2      0
2                4.7               3.2  ...               0.2      0
3                4.6               3.1  ...               0.2      0
4                5.0               3.6  ...               0.2      0

[5 rows x 5 columns]
&gt; 2021-10-23 12:50:23,134 [info] p2=1, p3=10, r1=10 at mlrun-dask-cluster-04574796-5j6v59

&gt; --------------- Iteration: (5) ---------------
   sepal length (cm)  sepal width (cm)  ...  petal width (cm)  label
0                5.1               3.5  ...               0.2      0
1                4.9               3.0  ...               0.2      0
2                4.7               3.2  ...               0.2      0
3                4.6               3.1  ...               0.2      0
4                5.0               3.6  ...               0.2      0

[5 rows x 5 columns]
&gt; 2021-10-23 12:50:23,219 [info] p2=2, p3=20, r1=40 at mlrun-dask-cluster-04574796-5k5lhq

&gt; 2021-10-23 12:50:23,261 [info] tearing down the dask cluster..
&gt; 2021-10-23 12:50:43,363 [info] best iteration=7, used criteria r1
&gt; 2021-10-23 12:50:43,626 [info] run executed, status=completed
final state: completed
</pre></div>
</div>
<div class="output text_html"><style>
.dictlist {
  background-color: #4EC64B;
  text-align: center;
  margin: 4px;
  border-radius: 3px; padding: 0px 3px 1px 3px; display: inline-block;}
.artifact {
  cursor: pointer;
  background-color: #4EC64B;
  text-align: left;
  margin: 4px; border-radius: 3px; padding: 0px 3px 1px 3px; display: inline-block;
}
div.block.hidden {
  display: none;
}
.clickable {
  cursor: pointer;
}
.ellipsis {
  display: inline-block;
  max-width: 60px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.master-wrapper {
  display: flex;
  flex-flow: row nowrap;
  justify-content: flex-start;
  align-items: stretch;
}
.master-tbl {
  flex: 3
}
.master-wrapper > div {
  margin: 4px;
  padding: 10px;
}
iframe.fileview {
  border: 0 none;
  height: 100%;
  width: 100%;
  white-space: pre-wrap;
}
.pane-header-title {
  width: 80%;
  font-weight: 500;
}
.pane-header {
  line-height: 1;
  background-color: #4EC64B;
  padding: 3px;
}
.pane-header .close {
  font-size: 20px;
  font-weight: 700;
  float: right;
  margin-top: -5px;
}
.master-wrapper .right-pane {
  border: 1px inset silver;
  width: 40%;
  min-height: 300px;
  flex: 3
  min-width: 500px;
}
.master-wrapper * {
  box-sizing: border-box;
}
</style><script>
function copyToClipboard(fld) {
    if (document.queryCommandSupported && document.queryCommandSupported('copy')) {
        var textarea = document.createElement('textarea');
        textarea.textContent = fld.innerHTML;
        textarea.style.position = 'fixed';
        document.body.appendChild(textarea);
        textarea.select();

        try {
            return document.execCommand('copy'); // Security exception may be thrown by some browsers.
        } catch (ex) {

        } finally {
            document.body.removeChild(textarea);
        }
    }
}
function expandPanel(el) {
  const panelName = "#" + el.getAttribute('paneName');
  console.log(el.title);

  document.querySelector(panelName + "-title").innerHTML = el.title
  iframe = document.querySelector(panelName + "-body");

  const tblcss = `<style> body { font-family: Arial, Helvetica, sans-serif;}
    #csv { margin-bottom: 15px; }
    #csv table { border-collapse: collapse;}
    #csv table td { padding: 4px 8px; border: 1px solid silver;} </style>`;

  function csvToHtmlTable(str) {
    return '<div id="csv"><table><tr><td>' +  str.replace(/[\n\r]+$/g, '').replace(/[\n\r]+/g, '</td></tr><tr><td>')
      .replace(/,/g, '</td><td>') + '</td></tr></table></div>';
  }

  function reqListener () {
    if (el.title.endsWith(".csv")) {
      iframe.setAttribute("srcdoc", tblcss + csvToHtmlTable(this.responseText));
    } else {
      iframe.setAttribute("srcdoc", this.responseText);
    }
    console.log(this.responseText);
  }

  const oReq = new XMLHttpRequest();
  oReq.addEventListener("load", reqListener);
  oReq.open("GET", el.title);
  oReq.send();


  //iframe.src = el.title;
  const resultPane = document.querySelector(panelName + "-pane");
  if (resultPane.classList.contains("hidden")) {
    resultPane.classList.remove("hidden");
  }
}
function closePanel(el) {
  const panelName = "#" + el.getAttribute('paneName')
  const resultPane = document.querySelector(panelName + "-pane");
  if (!resultPane.classList.contains("hidden")) {
    resultPane.classList.add("hidden");
  }
}

</script>
<div class="master-wrapper">
  <div class="block master-tbl"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>project</th>
      <th>uid</th>
      <th>iter</th>
      <th>start</th>
      <th>state</th>
      <th>name</th>
      <th>labels</th>
      <th>inputs</th>
      <th>parameters</th>
      <th>results</th>
      <th>artifacts</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>default</td>
      <td><div title="50eb72f5b0734954b8b1c57494f325bc"><a href="https://dashboard.default-tenant.app.yh38.iguazio-cd2.com/mlprojects/default/jobs/monitor/50eb72f5b0734954b8b1c57494f325bc/overview" target="_blank" >...94f325bc</a></div></td>
      <td>0</td>
      <td>Oct 23 12:49:59</td>
      <td>completed</td>
      <td>hyper-tst-hyper_func2</td>
      <td><div class="dictlist">v3io_user=admin</div><div class="dictlist">kind=job</div><div class="dictlist">owner=admin</div></td>
      <td><div title="https://s3.wasabisys.com/iguazio/data/iris/iris_dataset.csv">data</div></td>
      <td><div class="dictlist">p1=8</div></td>
      <td><div class="dictlist">best_iteration=7</div><div class="dictlist">r1=80</div></td>
      <td><div title="v3io:///projects/default/artifacts/7/mydf">mydf</div><div class="artifact" onclick="expandPanel(this)" paneName="resultcdedeefc" title="files/v3io/projects/default/artifacts/iteration_results.csv">iteration_results</div></td>
    </tr>
  </tbody>
</table>
</div></div>
  <div id="resultcdedeefc-pane" class="right-pane block hidden">
    <div class="pane-header">
      <span id="resultcdedeefc-title" class="pane-header-title">Title</span>
      <span onclick="closePanel(this)" paneName="resultcdedeefc" class="close clickable">&times;</span>
    </div>
    <iframe class="fileview" id="resultcdedeefc-body"></iframe>
  </div>
</div>
</div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><b> > to track results use the .show() or .logs() methods  or <a href="https://dashboard.default-tenant.app.yh38.iguazio-cd2.com/mlprojects/default/jobs/monitor/50eb72f5b0734954b8b1c57494f325bc/overview" target="_blank">click here</a> to open in UI</b></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&gt; 2021-10-23 12:50:53,303 [info] run executed, status=completed
</pre></div>
</div>
</div>
</div>
</section>
</section>
<section id="running-the-workers-using-nuclio">
<h3>Running the workers using Nuclio<a class="headerlink" href="#running-the-workers-using-nuclio" title="Permalink to this headline">#</a></h3>
<p>Nuclio is a high-performance serverless engine that can process many events in parallel. It can also separate initialization from execution. Certain parts of the code (imports, loading data, etc.) can be done once per worker vs. in any run.</p>
<p>Nuclio, by default, process events (http, stream, …). There is a special Nuclio kind that runs MLRun jobs (nuclio:mlrun).</p>
<div class="admonition-notes admonition">
<p class="admonition-title">Notes</p>
<ul class="simple">
<li><p>Nuclio tasks are relatively short (preferably under 5 minutes), use it for running many iterations where each individual run is less than 5 min.</p></li>
<li><p>Use <code class="docutils literal notranslate"><span class="pre">context.logger</span></code> to drive text outputs (vs <code class="docutils literal notranslate"><span class="pre">print()</span></code>).</p></li>
</ul>
</div>
<section id="create-a-nuclio-mlrun-function">
<h4>Create a nuclio:mlrun function<a class="headerlink" href="#create-a-nuclio-mlrun-function" title="Permalink to this headline">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">fn</span> <span class="o">=</span> <span class="n">mlrun</span><span class="o">.</span><span class="n">code_to_function</span><span class="p">(</span><span class="n">name</span><span class="o">=</span><span class="s1">&#39;hyper-tst2&#39;</span><span class="p">,</span> <span class="n">kind</span><span class="o">=</span><span class="s1">&#39;nuclio:mlrun&#39;</span><span class="p">,</span> <span class="n">image</span><span class="o">=</span><span class="s1">&#39;mlrun/mlrun&#39;</span><span class="p">)</span>
<span class="c1"># replicas * workers need to match or exceed parallel_runs</span>
<span class="n">fn</span><span class="o">.</span><span class="n">spec</span><span class="o">.</span><span class="n">replicas</span> <span class="o">=</span> <span class="mi">2</span>
<span class="n">fn</span><span class="o">.</span><span class="n">with_http</span><span class="p">(</span><span class="n">workers</span><span class="o">=</span><span class="mi">2</span><span class="p">)</span>
<span class="n">fn</span><span class="o">.</span><span class="n">deploy</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&gt; 2021-10-23 12:51:10,152 [info] Starting remote function deploy
2021-10-23 12:51:10  (info) Deploying function
2021-10-23 12:51:10  (info) Building
2021-10-23 12:51:10  (info) Staging files and preparing base images
2021-10-23 12:51:10  (info) Building processor image
2021-10-23 12:51:11  (info) Build complete
2021-10-23 12:51:19  (info) Function deploy complete
&gt; 2021-10-23 12:51:22,296 [info] successfully deployed function: {&#39;internal_invocation_urls&#39;: [&#39;nuclio-default-hyper-tst2.default-tenant.svc.cluster.local:8080&#39;], &#39;external_invocation_urls&#39;: [&#39;default-tenant.app.yh38.iguazio-cd2.com:32760&#39;]}
</pre></div>
</div>
<div class="output text_plain highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&#39;http://default-tenant.app.yh38.iguazio-cd2.com:32760&#39;
</pre></div>
</div>
</div>
</div>
</section>
<section id="run-the-parallel-task-over-the-function">
<h4>Run the parallel task over the function<a class="headerlink" href="#run-the-parallel-task-over-the-function" title="Permalink to this headline">#</a></h4>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="c1"># this is required to fix Jupyter issue with asyncio (not required outside of Jupyter)</span>
<span class="c1"># run it only once</span>
<span class="kn">import</span> <span class="nn">nest_asyncio</span>
<span class="n">nest_asyncio</span><span class="o">.</span><span class="n">apply</span><span class="p">()</span>
</pre></div>
</div>
</div>
</div>
<div class="cell docutils container">
<div class="cell_input docutils container">
<div class="highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">grid_params</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;p2&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">2</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mi">4</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="s2">&quot;p3&quot;</span><span class="p">:</span> <span class="p">[</span><span class="mi">10</span><span class="p">,</span><span class="mi">20</span><span class="p">]}</span>
<span class="n">task</span> <span class="o">=</span> <span class="n">mlrun</span><span class="o">.</span><span class="n">new_task</span><span class="p">(</span><span class="n">params</span><span class="o">=</span><span class="p">{</span><span class="s2">&quot;p1&quot;</span><span class="p">:</span> <span class="mi">8</span><span class="p">},</span> <span class="n">inputs</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;data&#39;</span><span class="p">:</span> <span class="s1">&#39;https://s3.wasabisys.com/iguazio/data/iris/iris_dataset.csv&#39;</span><span class="p">})</span>
<span class="n">task</span><span class="o">.</span><span class="n">with_hyper_params</span><span class="p">(</span>
    <span class="n">grid_params</span><span class="p">,</span> <span class="n">selector</span><span class="o">=</span><span class="s2">&quot;r1&quot;</span><span class="p">,</span> <span class="n">strategy</span><span class="o">=</span><span class="s2">&quot;grid&quot;</span><span class="p">,</span> <span class="n">parallel_runs</span><span class="o">=</span><span class="mi">4</span><span class="p">,</span> <span class="n">max_errors</span><span class="o">=</span><span class="mi">3</span>
<span class="p">)</span>
<span class="n">run</span> <span class="o">=</span> <span class="n">fn</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="n">handler</span><span class="o">=</span><span class="n">hyper_func2</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="cell_output docutils container">
<div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&gt; 2021-10-23 12:51:31,618 [info] starting run hyper-tst2-hyper_func2 uid=97cc3e255f3c4c93822b0154d63f47f5 DB=http://mlrun-api:8080
&gt; --------------- Iteration: (4) ---------------
2021-10-23 12:51:32.130812  info   logging run results to: http://mlrun-api:8080  worker_id=1
2021-10-23 12:51:32.401258  info   p2=1, p3=10, r1=10 at nuclio-default-hyper-tst2-5d4976b685-47dh6  worker_id=1

&gt; --------------- Iteration: (2) ---------------
2021-10-23 12:51:32.130713  info   logging run results to: http://mlrun-api:8080  worker_id=0
2021-10-23 12:51:32.409468  info   p2=1, p3=10, r1=10 at nuclio-default-hyper-tst2-5d4976b685-47dh6  worker_id=0

&gt; --------------- Iteration: (1) ---------------
2021-10-23 12:51:32.130765  info   logging run results to: http://mlrun-api:8080  worker_id=0
2021-10-23 12:51:32.432121  info   p2=2, p3=10, r1=20 at nuclio-default-hyper-tst2-5d4976b685-2gdtc  worker_id=0

&gt; --------------- Iteration: (5) ---------------
2021-10-23 12:51:32.568848  info   logging run results to: http://mlrun-api:8080  worker_id=0
2021-10-23 12:51:32.716415  info   p2=2, p3=20, r1=40 at nuclio-default-hyper-tst2-5d4976b685-47dh6  worker_id=0

&gt; --------------- Iteration: (7) ---------------
2021-10-23 12:51:32.855399  info   logging run results to: http://mlrun-api:8080  worker_id=1
2021-10-23 12:51:33.054417  info   p2=4, p3=20, r1=80 at nuclio-default-hyper-tst2-5d4976b685-2gdtc  worker_id=1

&gt; --------------- Iteration: (6) ---------------
2021-10-23 12:51:32.970002  info   logging run results to: http://mlrun-api:8080  worker_id=0
2021-10-23 12:51:33.136621  info   p2=1, p3=20, r1=20 at nuclio-default-hyper-tst2-5d4976b685-47dh6  worker_id=0

&gt; --------------- Iteration: (3) ---------------
2021-10-23 12:51:32.541187  info   logging run results to: http://mlrun-api:8080  worker_id=1
2021-10-23 12:51:33.301200  info   p2=4, p3=10, r1=40 at nuclio-default-hyper-tst2-5d4976b685-47dh6  worker_id=1

&gt; --------------- Iteration: (8) ---------------
2021-10-23 12:51:33.419442  info   logging run results to: http://mlrun-api:8080  worker_id=0
2021-10-23 12:51:33.672165  info   p2=1, p3=20, r1=20 at nuclio-default-hyper-tst2-5d4976b685-47dh6  worker_id=0

&gt; 2021-10-23 12:51:34,153 [info] best iteration=7, used criteria r1
</pre></div>
</div>
<div class="output text_html"><style>
.dictlist {
  background-color: #4EC64B;
  text-align: center;
  margin: 4px;
  border-radius: 3px; padding: 0px 3px 1px 3px; display: inline-block;}
.artifact {
  cursor: pointer;
  background-color: #4EC64B;
  text-align: left;
  margin: 4px; border-radius: 3px; padding: 0px 3px 1px 3px; display: inline-block;
}
div.block.hidden {
  display: none;
}
.clickable {
  cursor: pointer;
}
.ellipsis {
  display: inline-block;
  max-width: 60px;
  white-space: nowrap;
  overflow: hidden;
  text-overflow: ellipsis;
}
.master-wrapper {
  display: flex;
  flex-flow: row nowrap;
  justify-content: flex-start;
  align-items: stretch;
}
.master-tbl {
  flex: 3
}
.master-wrapper > div {
  margin: 4px;
  padding: 10px;
}
iframe.fileview {
  border: 0 none;
  height: 100%;
  width: 100%;
  white-space: pre-wrap;
}
.pane-header-title {
  width: 80%;
  font-weight: 500;
}
.pane-header {
  line-height: 1;
  background-color: #4EC64B;
  padding: 3px;
}
.pane-header .close {
  font-size: 20px;
  font-weight: 700;
  float: right;
  margin-top: -5px;
}
.master-wrapper .right-pane {
  border: 1px inset silver;
  width: 40%;
  min-height: 300px;
  flex: 3
  min-width: 500px;
}
.master-wrapper * {
  box-sizing: border-box;
}
</style><script>
function copyToClipboard(fld) {
    if (document.queryCommandSupported && document.queryCommandSupported('copy')) {
        var textarea = document.createElement('textarea');
        textarea.textContent = fld.innerHTML;
        textarea.style.position = 'fixed';
        document.body.appendChild(textarea);
        textarea.select();

        try {
            return document.execCommand('copy'); // Security exception may be thrown by some browsers.
        } catch (ex) {

        } finally {
            document.body.removeChild(textarea);
        }
    }
}
function expandPanel(el) {
  const panelName = "#" + el.getAttribute('paneName');
  console.log(el.title);

  document.querySelector(panelName + "-title").innerHTML = el.title
  iframe = document.querySelector(panelName + "-body");

  const tblcss = `<style> body { font-family: Arial, Helvetica, sans-serif;}
    #csv { margin-bottom: 15px; }
    #csv table { border-collapse: collapse;}
    #csv table td { padding: 4px 8px; border: 1px solid silver;} </style>`;

  function csvToHtmlTable(str) {
    return '<div id="csv"><table><tr><td>' +  str.replace(/[\n\r]+$/g, '').replace(/[\n\r]+/g, '</td></tr><tr><td>')
      .replace(/,/g, '</td><td>') + '</td></tr></table></div>';
  }

  function reqListener () {
    if (el.title.endsWith(".csv")) {
      iframe.setAttribute("srcdoc", tblcss + csvToHtmlTable(this.responseText));
    } else {
      iframe.setAttribute("srcdoc", this.responseText);
    }
    console.log(this.responseText);
  }

  const oReq = new XMLHttpRequest();
  oReq.addEventListener("load", reqListener);
  oReq.open("GET", el.title);
  oReq.send();


  //iframe.src = el.title;
  const resultPane = document.querySelector(panelName + "-pane");
  if (resultPane.classList.contains("hidden")) {
    resultPane.classList.remove("hidden");
  }
}
function closePanel(el) {
  const panelName = "#" + el.getAttribute('paneName')
  const resultPane = document.querySelector(panelName + "-pane");
  if (!resultPane.classList.contains("hidden")) {
    resultPane.classList.add("hidden");
  }
}

</script>
<div class="master-wrapper">
  <div class="block master-tbl"><div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th>project</th>
      <th>uid</th>
      <th>iter</th>
      <th>start</th>
      <th>state</th>
      <th>name</th>
      <th>labels</th>
      <th>inputs</th>
      <th>parameters</th>
      <th>results</th>
      <th>artifacts</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>default</td>
      <td><div title="97cc3e255f3c4c93822b0154d63f47f5"><a href="https://dashboard.default-tenant.app.yh38.iguazio-cd2.com/mlprojects/default/jobs/monitor/97cc3e255f3c4c93822b0154d63f47f5/overview" target="_blank" >...d63f47f5</a></div></td>
      <td>0</td>
      <td>Oct 23 12:51:31</td>
      <td>completed</td>
      <td>hyper-tst2-hyper_func2</td>
      <td><div class="dictlist">v3io_user=admin</div><div class="dictlist">kind=remote</div><div class="dictlist">owner=admin</div></td>
      <td><div title="https://s3.wasabisys.com/iguazio/data/iris/iris_dataset.csv">data</div></td>
      <td><div class="dictlist">p1=8</div></td>
      <td><div class="dictlist">best_iteration=7</div><div class="dictlist">r1=80</div></td>
      <td><div title="v3io:///projects/default/artifacts/7/mydf">mydf</div><div class="artifact" onclick="expandPanel(this)" paneName="result7f47fd92" title="files/v3io/projects/default/artifacts/iteration_results.csv">iteration_results</div></td>
    </tr>
  </tbody>
</table>
</div></div>
  <div id="result7f47fd92-pane" class="right-pane block hidden">
    <div class="pane-header">
      <span id="result7f47fd92-title" class="pane-header-title">Title</span>
      <span onclick="closePanel(this)" paneName="result7f47fd92" class="close clickable">&times;</span>
    </div>
    <iframe class="fileview" id="result7f47fd92-body"></iframe>
  </div>
</div>
</div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>
</pre></div>
</div>
<div class="output text_html"><b> > to track results use the .show() or .logs() methods  or <a href="https://dashboard.default-tenant.app.yh38.iguazio-cd2.com/mlprojects/default/jobs/monitor/97cc3e255f3c4c93822b0154d63f47f5/overview" target="_blank">click here</a> to open in UI</b></div><div class="output stream highlight-myst-ansi notranslate"><div class="highlight"><pre><span></span>&gt; 2021-10-23 12:51:34,420 [info] run executed, status=completed
</pre></div>
</div>
</div>
</div>
</section>
</section>
</section>
</section>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="training/built-in-training-function.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">Using the built-in training function</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="feature-store/retrieve-offline-data.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Training with the feature store</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Iguazio<br/>
  
      &copy; Copyright 2022, Iguazio.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>



<div class="footer"><!-- This page uses <a href="https://analytics.google.com/">
Google Analytics</a> to collect statistics. You can disable it by blocking
the JavaScript coming from www.google-analytics.com. -->

</div>

  </body>
</html>