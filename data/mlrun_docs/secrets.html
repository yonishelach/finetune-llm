
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>Working with secrets</title>
    
  <!-- Loaded before other Sphinx assets -->
  <link href="_static/styles/theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">
<link href="_static/styles/pydata-sphinx-theme.css?digest=1999514e3f237ded88cf" rel="stylesheet">

    
  <link rel="stylesheet"
    href="_static/vendor/fontawesome/5.13.0/css/all.min.css">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-solid-900.woff2">
  <link rel="preload" as="font" type="font/woff2" crossorigin
    href="_static/vendor/fontawesome/5.13.0/webfonts/fa-brands-400.woff2">

    <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" href="_static/styles/sphinx-book-theme.css?digest=5115cc725059bd94278eecd172e13a965bf8f5a9" type="text/css" />
    <link rel="stylesheet" type="text/css" href="_static/mystnb.css" />
    <link rel="stylesheet" type="text/css" href="_static/togglebutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/copybutton.css" />
    <link rel="stylesheet" type="text/css" href="_static/custom.css" />
    <link rel="stylesheet" type="text/css" href="_static/design-style.b7bb847fb20b106c3d81b95245e65545.min.css" />
    <link rel="stylesheet" type="text/css" href="/_/static/css/badge_only.css" />
    
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf">

    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/clipboard.min.js"></script>
    <script src="_static/copybutton.js"></script>
    <script>let toggleHintShow = 'Click to show';</script>
    <script>let toggleHintHide = 'Click to hide';</script>
    <script>let toggleOpenOnPrint = 'true';</script>
    <script src="_static/togglebutton.js"></script>
    <script src="_static/scripts/sphinx-book-theme.js?digest=9c920249402e914e316237a7dbc6769907cce411"></script>
    <script>var togglebuttonSelector = '.toggle, .admonition.dropdown, .tag_hide_input div.cell_input, .tag_hide-input div.cell_input, .tag_hide_output div.cell_output, .tag_hide-output div.cell_output, .tag_hide_cell.cell, .tag_hide-cell.cell';</script>
    <script src="_static/design-tabs.js"></script>
    <script async="async" src="/_/static/javascript/readthedocs-doc-embed.js"></script>
    <link rel="canonical" href="https://docs.mlrun.org/en/stable/secrets.html" />
    <link rel="shortcut icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Serverless functions" href="runtimes/functions.html" />
    <link rel="prev" title="CI/CD integration" href="projects/ci-integration.html" />

    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="docsearch:language" content="en">
    

    <!-- Google Analytics -->
    
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
})(window,document,'script','dataLayer','GTM-MV26G85');</script>
<!-- End Google Tag Manager -->


  
<!-- RTD Extra Head -->

<link rel="stylesheet" href="/_/static/css/readthedocs-doc-embed.css" type="text/css" />

<script type="application/json" id="READTHEDOCS_DATA">{"ad_free": false, "api_host": "https://readthedocs.org", "build_date": "2022-12-01T09:20:55Z", "builder": "sphinx", "canonical_url": null, "commit": "9933138d", "docroot": "/docs/", "features": {"docsearch_disabled": false}, "global_analytics_code": "UA-17997319-1", "language": "en", "page": "secrets", "programming_language": "py", "project": "mlrun", "proxied_api_host": "/_", "source_suffix": ".md", "subprojects": {}, "theme": "sphinx_book_theme", "user_analytics_code": "UA-101852366-5", "version": "stable"}</script>

<!--
Using this variable directly instead of using `JSON.parse` is deprecated.
The READTHEDOCS_DATA global variable will be removed in the future.
-->
<script type="text/javascript">
READTHEDOCS_DATA = JSON.parse(document.getElementById('READTHEDOCS_DATA').innerHTML);
</script>

<script type="text/javascript" src="/_/static/javascript/readthedocs-analytics.js" async="async"></script>

<!-- end RTD <extrahead> -->
</head>
  <body data-spy="scroll" data-target="#bd-toc-nav" data-offset="60">
<!-- Checkboxes to toggle the left sidebar -->
<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation" aria-label="Toggle navigation sidebar">
<label class="overlay overlay-navbar" for="__navigation">
    <div class="visually-hidden">Toggle navigation sidebar</div>
</label>
<!-- Checkboxes to toggle the in-page toc -->
<input type="checkbox" class="sidebar-toggle" name="__page-toc" id="__page-toc" aria-label="Toggle in-page Table of Contents">
<label class="overlay overlay-pagetoc" for="__page-toc">
    <div class="visually-hidden">Toggle in-page Table of Contents</div>
</label>
<!-- Headers at the top -->
<div class="announcement header-item noprint"></div>
<div class="header header-item noprint"></div>

    
    <div class="container-fluid" id="banner"></div>

    

    <div class="container-xl">
      <div class="row">
          
<!-- Sidebar -->
<div class="bd-sidebar noprint" id="site-navigation">
    <div class="bd-sidebar__content">
        <div class="bd-sidebar__top"><div class="navbar-brand-box">
    <a class="navbar-brand text-wrap" href="index.html">
      
        <!-- `logo` is deprecated in Sphinx 4.0, so remove this when we stop supporting 3 -->
        
      
      
      <img src="_static/MLRun_Character.png" class="logo" alt="logo">
      
      
    </a>
</div><form class="bd-search d-flex align-items-center" action="search.html" method="get">
  <i class="icon fas fa-search"></i>
  <input type="search" class="form-control" name="q" id="search-input" placeholder="Search the docs ..." aria-label="Search the docs ..." autocomplete="off" >
</form><nav class="bd-links" id="bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item active">
        <p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  MLRun basics
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="index.html">
   Using MLRun
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" type="checkbox"/>
  <label for="toctree-checkbox-1">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="architecture.html">
     MLRun architecture
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="mlops-dev-flow.html">
   MLOps development workflow
   <!-- omit in toc -->
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="tutorial/index.html">
   Tutorials and Examples
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" type="checkbox"/>
  <label for="toctree-checkbox-2">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="tutorial/01-mlrun-basics.html">
     Quick start tutorial
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="tutorial/02-model-training.html">
     Train, compare, and register models
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="tutorial/03-model-serving.html">
     Serving pre-trained ML/DL models
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="tutorial/04-pipeline.html">
     Projects and automated ML pipeline
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="tutorial/05-model-monitoring.html">
     Model monitoring and drift detection
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="tutorial/06-add-mlops-to-code.html">
     Add MLOps to existing code
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="tutorial/07-batch-infer.html">
     Batch inference and drift detection
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="feature-store/basic-demo.html">
     Feature store example (stocks)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference external" href="https://github.com/mlrun/demos">
     MLRun demos repository
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="install.html">
   Installation and setup guide
   <!-- omit in toc -->
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" type="checkbox"/>
  <label for="toctree-checkbox-3">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="install/local-docker.html">
     Install MLRun locally using Docker
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="install/kubernetes.html">
     Install MLRun on Kubernetes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="install/aws-install.html">
     Install MLRun on AWS
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="install/remote.html">
     Set up your client environment
     <!-- omit in toc -->
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  Core components
 </span>
</p>
<ul class="current nav bd-sidenav">
 <li class="toctree-l1 current active has-children">
  <a class="reference internal" href="projects/project.html">
   Projects and automation
  </a>
  <input checked="" class="toctree-checkbox" id="toctree-checkbox-4" name="toctree-checkbox-4" type="checkbox"/>
  <label for="toctree-checkbox-4">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul class="current">
   <li class="toctree-l2">
    <a class="reference internal" href="projects/create-project.html">
     Create, save, and use projects
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="projects/load-project.html">
     Load and run projects
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="projects/run-build-deploy.html">
     Run, build, and deploy functions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="projects/build-run-workflows-pipelines.html">
     Build and run workflows/pipelines
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="projects/ci-integration.html">
     CI/CD integration
    </a>
   </li>
   <li class="toctree-l2 current active">
    <a class="current reference internal" href="#">
     Working with secrets
     <!-- omit in toc -->
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="runtimes/functions.html">
   Serverless functions
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-5" name="toctree-checkbox-5" type="checkbox"/>
  <label for="toctree-checkbox-5">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="runtimes/functions-architecture.html">
     Functions architecture
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="concepts/functions-overview.html">
     Kinds of functions (runtimes)
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-6" name="toctree-checkbox-6" type="checkbox"/>
    <label for="toctree-checkbox-6">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3 has-children">
      <a class="reference internal" href="runtimes/dask-overview.html">
       Dask distributed runtime
      </a>
      <input class="toctree-checkbox" id="toctree-checkbox-7" name="toctree-checkbox-7" type="checkbox"/>
      <label for="toctree-checkbox-7">
       <i class="fas fa-chevron-down">
       </i>
      </label>
      <ul>
       <li class="toctree-l4">
        <a class="reference internal" href="runtimes/dask-mlrun.html">
         Running Dask on the cluster with mlrun
        </a>
       </li>
       <li class="toctree-l4">
        <a class="reference internal" href="runtimes/dask-pipeline.html">
         Pipelines using Dask, Kubeflow and MLRun
        </a>
       </li>
      </ul>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="runtimes/horovod.html">
       MPIJob and Horovod runtime
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="runtimes/spark-operator.html">
       Spark Operator runtime
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="concepts/nuclio-real-time-functions.html">
       Nuclio real-time functions
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="runtimes/create-and-use-functions.html">
     Create and use functions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="runtimes/mlrun_code_annotations.html">
     Converting notebooks to function
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="runtimes/function-storage.html">
     Attach storage to functions
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="runtimes/images.html">
     Images and their usage in MLRun
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="runtimes/image-build.html">
     Build function image
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="concepts/node-affinity.html">
     Node affinity
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="runtimes/configuring-job-resources.html">
     Managing job resources
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="runtimes/load-from-hub.html">
     Function Hub
     <!-- omit in toc -->
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="concepts/data.html">
   Data and artifacts
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-8" name="toctree-checkbox-8" type="checkbox"/>
  <label for="toctree-checkbox-8">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="store/datastore.html">
     Data stores
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="store/data-items.html">
     Data items
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="store/artifacts.html">
     Artifacts
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="store/models.html">
     Model Artifacts
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="feature-store/feature-store.html">
   Feature store
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-9" name="toctree-checkbox-9" type="checkbox"/>
  <label for="toctree-checkbox-9">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="feature-store/feature-store-overview.html">
     Feature store overview
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="feature-store/feature-sets.html">
     Feature sets
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="feature-store/transformations.html">
     Feature set transformations
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="feature-store/feature-vectors.html">
     Creating and using feature vectors
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="feature-store/end-to-end-demo/index.html">
     Feature store end-to-end demo
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-10" name="toctree-checkbox-10" type="checkbox"/>
    <label for="toctree-checkbox-10">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="feature-store/end-to-end-demo/01-ingest-datasources.html">
       Part 1: Data Ingestion
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="feature-store/end-to-end-demo/02-create-training-model.html">
       Part 2: Training
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="feature-store/end-to-end-demo/03-deploy-serving-model.html">
       Part 3: Serving
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="feature-store/end-to-end-demo/04-pipeline.html">
       Part 4: Automated ML pipeline
      </a>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="concepts/runs-workflows.html">
   Batch runs and workflows
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-11" name="toctree-checkbox-11" type="checkbox"/>
  <label for="toctree-checkbox-11">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="concepts/mlrun-execution-context.html">
     MLRun execution context
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="concepts/decorators-and-auto-logging.html">
     Decorators and auto-logging
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="concepts/submitting-tasks-jobs-to-functions.html">
     Running a task (job)
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="concepts/workflow-overview.html">
     Running a multi-stage workflow
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="concepts/scheduled-jobs.html">
     Scheduled jobs and workflows
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="serving/serving-graph.html">
   Real-time serving pipelines (graphs)
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-12" name="toctree-checkbox-12" type="checkbox"/>
  <label for="toctree-checkbox-12">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="serving/getting-started.html">
     Getting started
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="serving/use-cases.html">
     Use cases
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="serving/realtime-pipelines.html">
     Graph concepts and state machine
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="serving/model-serving-get-started.html">
     Model serving graph
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="serving/writing-custom-steps.html">
     Writing custom steps
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="serving/available-steps.html">
     Built-in steps
    </a>
   </li>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="serving/demos.html">
     Demos and tutorials
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-13" name="toctree-checkbox-13" type="checkbox"/>
    <label for="toctree-checkbox-13">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="serving/distributed-graph.html">
       Distributed (multi-function) pipeline example
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="serving/graph-example.html">
       Advanced model serving graph - notebook example
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="serving/graph-ha-cfg.html">
     Serving graph high availability configuration
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="serving/pipelines-error-handling.html">
     Error handling
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="concepts/monitoring.html">
   Model monitoring
  </a>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  MLOps tasks
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="data-prep/index.html">
   Ingest and process data
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-14" name="toctree-checkbox-14" type="checkbox"/>
  <label for="toctree-checkbox-14">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="data-prep/ingesting_data.html">
     Using data sources and items
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="data-prep/logging_datasets.html">
     Logging datasets
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="runtimes/spark-operator.html">
     Spark Operator runtime
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="data-prep/ingest-data-fs.html">
     Ingest data using the feature store
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="feature-store/using-spark-engine.html">
     Ingest features with Spark
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="development/index.html">
   Develop and train models
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-15" name="toctree-checkbox-15" type="checkbox"/>
  <label for="toctree-checkbox-15">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="development/model-training-tracking.html">
     Model training and tracking
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-16" name="toctree-checkbox-16" type="checkbox"/>
    <label for="toctree-checkbox-16">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="training/create-a-basic-training-job.html">
       Create a basic training job
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="training/working-with-data-and-model-artifacts.html">
       Working with data and model artifacts
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="concepts/auto-logging-mlops.html">
       Automated experiment tracking
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="training/built-in-training-function.html">
       Using the built-in training function
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="hyper-params.html">
       Hyperparameter tuning optimization
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="feature-store/retrieve-offline-data.html">
     Training with the feature store
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="deployment/index.html">
   Deploy models and applications
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-17" name="toctree-checkbox-17" type="checkbox"/>
  <label for="toctree-checkbox-17">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="serving/serving-overview.html">
     Real-time deployment
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-18" name="toctree-checkbox-18" type="checkbox"/>
    <label for="toctree-checkbox-18">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="serving/built-in-model-serving.html">
       Using built-in model serving classes
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="serving/custom-model-serving-class.html">
       Build your own model serving class
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="serving/test-deploy-model-server.html">
       Test and deploy a model server
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="serving/model-api.html">
       Model serving API
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="feature-store/training-serving.html">
     Serving with the feature store
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="deployment/batch_inference.html">
     Batch inference
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="serving/canary.html">
     Canary and rolling upgrades
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="monitoring/index.html">
   Monitor and alert
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-19" name="toctree-checkbox-19" type="checkbox"/>
  <label for="toctree-checkbox-19">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2">
    <a class="reference internal" href="monitoring/model-monitoring-deployment.html">
     Model monitoring overview
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="monitoring/initial-setup-configuration.html">
     Enable model monitoring
    </a>
   </li>
  </ul>
 </li>
</ul>
<p aria-level="2" class="caption" role="heading">
 <span class="caption-text">
  References
 </span>
</p>
<ul class="nav bd-sidenav">
 <li class="toctree-l1">
  <a class="reference internal" href="genindex.html">
   API index
  </a>
 </li>
 <li class="toctree-l1 has-children">
  <a class="reference internal" href="api/index.html">
   API by module
  </a>
  <input class="toctree-checkbox" id="toctree-checkbox-20" name="toctree-checkbox-20" type="checkbox"/>
  <label for="toctree-checkbox-20">
   <i class="fas fa-chevron-down">
   </i>
  </label>
  <ul>
   <li class="toctree-l2 has-children">
    <a class="reference internal" href="api/mlrun.frameworks/index.html">
     mlrun.frameworks
    </a>
    <input class="toctree-checkbox" id="toctree-checkbox-21" name="toctree-checkbox-21" type="checkbox"/>
    <label for="toctree-checkbox-21">
     <i class="fas fa-chevron-down">
     </i>
    </label>
    <ul>
     <li class="toctree-l3">
      <a class="reference internal" href="api/mlrun.frameworks/mlrun.frameworks.auto_mlrun.html">
       AutoMLRun
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/mlrun.frameworks/mlrun.frameworks.tf_keras.html">
       TensorFlow.Keras
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/mlrun.frameworks/mlrun.frameworks.pytorch.html">
       PyTorch
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/mlrun.frameworks/mlrun.frameworks.sklearn.html">
       SciKit-Learn
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/mlrun.frameworks/mlrun.frameworks.xgboost.html">
       XGBoost
      </a>
     </li>
     <li class="toctree-l3">
      <a class="reference internal" href="api/mlrun.frameworks/mlrun.frameworks.lgbm.html">
       LightGBM
      </a>
     </li>
    </ul>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/mlrun.html">
     mlrun
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/mlrun.artifacts.html">
     mlrun.artifacts
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/mlrun.config.html">
     mlrun.config
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/mlrun.datastore.html">
     mlrun.datastore
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/mlrun.db.html">
     mlrun.db
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/mlrun.execution.html">
     mlrun.execution
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/mlrun.feature_store.html">
     mlrun.feature_store
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/mlrun.model.html">
     mlrun.model
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/mlrun.platforms.html">
     mlrun.platforms
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/mlrun.projects.html">
     mlrun.projects
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/mlrun.run.html">
     mlrun.run
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/mlrun.runtimes.html">
     mlrun.runtimes
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/mlrun.serving.html">
     mlrun.serving
    </a>
   </li>
   <li class="toctree-l2">
    <a class="reference internal" href="api/storey.transformations.html">
     storey.transformations - Graph transformations
    </a>
   </li>
  </ul>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="cli.html">
   Command-Line Interface
  </a>
 </li>
 <li class="toctree-l1">
  <a class="reference internal" href="glossary.html">
   Glossary
  </a>
 </li>
</ul>

    </div>
</nav></div>
        <div class="bd-sidebar__bottom">
             <!-- To handle the deprecated key -->
            
            <div class="navbar_extra_footer">
            By <a href="https://www.iguazio.com/">Iguazio</a>
            </div>
            
        </div>
    </div>
    <div id="rtd-footer-container"></div>
</div>


          


          
<!-- A tiny helper pixel to detect if we've scrolled -->
<div class="sbt-scroll-pixel-helper"></div>
<!-- Main content -->
<div class="col py-0 content-container">
    
    <div class="header-article row sticky-top noprint">
        



<div class="col py-1 d-flex header-article-main">
    <div class="header-article__left">
        
        <label for="__navigation"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="right"
title="Toggle navigation"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-bars"></i>
  </span>

</label>

        
    </div>
    <div class="header-article__right">
<button onclick="toggleFullScreen()"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="bottom"
title="Fullscreen mode"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>

<div class="menu-dropdown menu-dropdown-repository-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Source repositories">
      <i class="fab fa-github"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="https://github.com/mlrun/mlrun"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Source repository"
>
  

<span class="headerbtn__icon-container">
  <i class="fab fa-github"></i>
  </span>
<span class="headerbtn__text-container">repository</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/mlrun/mlrun/issues/new?title=Issue%20on%20page%20%2Fsecrets.html&body=Your%20issue%20content%20here."
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Open an issue"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-lightbulb"></i>
  </span>
<span class="headerbtn__text-container">open issue</span>
</a>

      </li>
      
      <li>
        <a href="https://github.com/mlrun/mlrun/edit/development/docs/secrets.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Edit this page"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-pencil-alt"></i>
  </span>
<span class="headerbtn__text-container">suggest edit</span>
</a>

      </li>
      
    </ul>
  </div>
</div>

<div class="menu-dropdown menu-dropdown-download-buttons">
  <button class="headerbtn menu-dropdown__trigger"
      aria-label="Download this page">
      <i class="fas fa-download"></i>
  </button>
  <div class="menu-dropdown__content">
    <ul>
      <li>
        <a href="_sources/secrets.md"
   class="headerbtn"
   data-toggle="tooltip"
data-placement="left"
title="Download source file"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="headerbtn__text-container">.md</span>
</a>

      </li>
      
      <li>
        
<button onclick="printPdf(this)"
  class="headerbtn"
  data-toggle="tooltip"
data-placement="left"
title="Print to PDF"
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="headerbtn__text-container">.pdf</span>
</button>

      </li>
      
    </ul>
  </div>
</div>
<label for="__page-toc"
  class="headerbtn headerbtn-page-toc"
  
>
  

<span class="headerbtn__icon-container">
  <i class="fas fa-list"></i>
  </span>

</label>

    </div>
</div>

<!-- Table of contents -->
<div class="col-md-3 bd-toc show noprint">
    <div class="tocsection onthispage pt-5 pb-3">
        <i class="fas fa-list"></i> Contents
    </div>
    <nav id="bd-toc-nav" aria-label="Page">
        <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#overview">
   Overview
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#mlrun-managed-secrets">
   MLRun-managed secrets
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-tasks-with-secrets">
     Using tasks with secrets
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#secret-providers">
     Secret providers
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#kubernetes-project-secrets">
       Kubernetes project secrets
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#creating-project-secrets">
         Creating project secrets
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#creating-secrets-in-the-projects-ui-page">
         Creating secrets in the Projects UI page
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#accessing-the-secrets">
         Accessing the secrets
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#accessing-secrets-in-nuclio-functions">
         Accessing secrets in nuclio functions
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#azure-vault">
       Azure Vault
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#setting-up-access-to-azure-key-vault">
         Setting up access to Azure key vault
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#accessing-azure-key-vault-secrets">
         Accessing Azure key vault secrets
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#demo-development-secret-providers">
       Demo/Development secret providers
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#inline">
         Inline
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#environment">
         Environment
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#file">
         File
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#externally-managed-secrets">
   Externally managed secrets
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#mapping-secrets-to-environment">
     Mapping secrets to environment
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#mapping-secrets-as-files">
     Mapping secrets as files
    </a>
   </li>
  </ul>
 </li>
</ul>

    </nav>
</div>
    </div>
    <div class="article row">
        <div class="col pl-md-3 pl-lg-5 content-container">
            <!-- Table of contents that is only displayed when printing the page -->
            <div id="jb-print-docs-body" class="onlyprint">
                <h1>Working with secrets  <!-- omit in toc --></h1>
                <!-- Table of contents -->
                <div id="print-main-content">
                    <div id="jb-print-toc">
                        
                        <div>
                            <h2> Contents </h2>
                        </div>
                        <nav aria-label="Page">
                            <ul class="visible nav section-nav flex-column">
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#overview">
   Overview
  </a>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#mlrun-managed-secrets">
   MLRun-managed secrets
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#using-tasks-with-secrets">
     Using tasks with secrets
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#secret-providers">
     Secret providers
    </a>
    <ul class="nav section-nav flex-column">
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#kubernetes-project-secrets">
       Kubernetes project secrets
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#creating-project-secrets">
         Creating project secrets
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#creating-secrets-in-the-projects-ui-page">
         Creating secrets in the Projects UI page
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#accessing-the-secrets">
         Accessing the secrets
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#accessing-secrets-in-nuclio-functions">
         Accessing secrets in nuclio functions
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#azure-vault">
       Azure Vault
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#setting-up-access-to-azure-key-vault">
         Setting up access to Azure key vault
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#accessing-azure-key-vault-secrets">
         Accessing Azure key vault secrets
        </a>
       </li>
      </ul>
     </li>
     <li class="toc-h4 nav-item toc-entry">
      <a class="reference internal nav-link" href="#demo-development-secret-providers">
       Demo/Development secret providers
      </a>
      <ul class="nav section-nav flex-column">
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#inline">
         Inline
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#environment">
         Environment
        </a>
       </li>
       <li class="toc-h5 nav-item toc-entry">
        <a class="reference internal nav-link" href="#file">
         File
        </a>
       </li>
      </ul>
     </li>
    </ul>
   </li>
  </ul>
 </li>
 <li class="toc-h2 nav-item toc-entry">
  <a class="reference internal nav-link" href="#externally-managed-secrets">
   Externally managed secrets
  </a>
  <ul class="nav section-nav flex-column">
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#mapping-secrets-to-environment">
     Mapping secrets to environment
    </a>
   </li>
   <li class="toc-h3 nav-item toc-entry">
    <a class="reference internal nav-link" href="#mapping-secrets-as-files">
     Mapping secrets as files
    </a>
   </li>
  </ul>
 </li>
</ul>

                        </nav>
                    </div>
                </div>
            </div>
            <main id="main-content" role="main">
                
              <div>
                
  <section id="working-with-secrets-omit-in-toc">
<span id="secrets"></span><h1>Working with secrets  <!-- omit in toc --><a class="headerlink" href="#working-with-secrets-omit-in-toc" title="Permalink to this headline">#</a></h1>
<p>When executing jobs through MLRun, the code might need access to specific secrets, for example to access data
residing on a data-store that requires credentials (such as a private S3 bucket), or many other similar needs.</p>
<p>MLRun provides some facilities that allow handling secrets and passing those secrets to execution jobs. It’s
important to understand how these facilities work, as this has implications on the level of security they provide
and how much exposure they create for your secrets.</p>
<p><strong>In this section</strong></p>
<ul class="simple">
<li><p><a class="reference external" href="#overview">Overview</a></p></li>
<li><p><a class="reference external" href="#mlrun-managed-secrets">MLRun-managed secrets</a></p>
<ul>
<li><p><a class="reference external" href="#using-tasks-with-secrets">Using tasks with secrets</a></p></li>
<li><p><a class="reference external" href="#secret-providers">Secret providers</a></p>
<ul>
<li><p><a class="reference external" href="#kubernetes-project-secrets">Kubernetes project secrets</a></p></li>
<li><p><a class="reference external" href="#azure-vault">Azure Vault</a></p></li>
<li><p><a class="reference external" href="#demo-development-secret-providers">Demo/Development secret providers</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference external" href="#externally-managed-secrets">Externally managed secrets</a></p>
<ul>
<li><p><a class="reference external" href="#mapping-secrets-to-environment">Mapping secrets to environment</a></p></li>
<li><p><a class="reference external" href="#mapping-secrets-as-files">Mapping secrets as files</a></p></li>
</ul>
</li>
</ul>
<section id="overview">
<h2>Overview<a class="headerlink" href="#overview" title="Permalink to this headline">#</a></h2>
<p>There are two main use-cases for providing secrets to an MLRun job. These are:</p>
<ul class="simple">
<li><p><a class="reference external" href="#mlrun-managed-secrets">Use MLRun-managed secrets</a>. This is a flow that enables the MLRun user (for example a
data scientist or engineer) to create and use secrets through interfaces that MLRun implements and manages.</p></li>
<li><p><a class="reference external" href="#externally-managed-secrets">Create secrets externally</a> to MLRun using a Kubernetes secret or some other secret
management framework (such as Azure vault), and utilize these secrets from within MLRun to enrich execution jobs. For
example, the secrets are created and managed by an IT admin, and the data-scientist only accesses them.</p></li>
</ul>
<p>The following sections cover the details of those two use-cases.</p>
</section>
<section id="mlrun-managed-secrets">
<h2>MLRun-managed secrets<a class="headerlink" href="#mlrun-managed-secrets" title="Permalink to this headline">#</a></h2>
<p>The easiest way to pass secrets to MLRun jobs is through the MLRun project secrets mechanism. MLRun jobs automatically
gain access to all project secrets defined for the same project. More details are available
<a class="reference external" href="#kubernetes-project-secrets">later in this page</a>.</p>
<p>The following is an example of using project secrets:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create project secrets for the myproj project</span>
<span class="n">project</span> <span class="o">=</span> <span class="n">mlrun</span><span class="o">.</span><span class="n">get_or_create_project</span><span class="p">(</span><span class="s2">&quot;myproj&quot;</span><span class="p">,</span> <span class="s2">&quot;./&quot;</span><span class="p">)</span>
<span class="n">secrets</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;AWS_KEY&#39;</span><span class="p">:</span> <span class="s1">&#39;111222333&#39;</span><span class="p">}</span>
<span class="n">project</span><span class="o">.</span><span class="n">set_secrets</span><span class="p">(</span><span class="n">secrets</span><span class="o">=</span><span class="n">secrets</span><span class="p">,</span> <span class="n">provider</span><span class="o">=</span><span class="s2">&quot;kubernetes&quot;</span><span class="p">)</span>

<span class="c1"># Create and run the MLRun job</span>
<span class="n">function</span> <span class="o">=</span> <span class="n">mlrun</span><span class="o">.</span><span class="n">code_to_function</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;secret_func&quot;</span><span class="p">,</span>
    <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;my_code.py&quot;</span><span class="p">,</span>
    <span class="n">handler</span><span class="o">=</span><span class="s2">&quot;test_function&quot;</span><span class="p">,</span>
    <span class="n">kind</span><span class="o">=</span><span class="s2">&quot;job&quot;</span><span class="p">,</span>
    <span class="n">image</span><span class="o">=</span><span class="s2">&quot;mlrun/mlrun&quot;</span>
<span class="p">)</span>
<span class="n">function</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</pre></div>
</div>
<p>The handler defined in <code class="docutils literal notranslate"><span class="pre">my_code.py</span></code> accesses the <code class="docutils literal notranslate"><span class="pre">AWS_KEY</span></code> secret by using the
<a class="reference internal" href="api/mlrun.execution.html#mlrun.execution.MLClientCtx.get_secret" title="mlrun.execution.MLClientCtx.get_secret"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_secret()</span></code></a> API:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">test_function</span><span class="p">(</span><span class="n">context</span><span class="p">):</span>
    <span class="n">context</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="s2">&quot;running function&quot;</span><span class="p">)</span>
    <span class="n">aws_key</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">get_secret</span><span class="p">(</span><span class="s2">&quot;AWS_KEY&quot;</span><span class="p">)</span>
    <span class="c1"># Use aws_key to perform processing.</span>
    <span class="o">...</span>
</pre></div>
</div>
<section id="using-tasks-with-secrets">
<h3>Using tasks with secrets<a class="headerlink" href="#using-tasks-with-secrets" title="Permalink to this headline">#</a></h3>
<p>MLRun uses the concept of Tasks to encapsulate runtime parameters. Tasks are used to specify execution context
such as hyper-parameters. They can also be used to pass details about secrets that are going to be used in the
runtime. This allows for control over specific secrets passed to runtimes, and support for the various MLRun secret
providers.</p>
<p>To pass secret parameters, use the Task’s <a class="reference internal" href="api/mlrun.model.html#mlrun.model.RunTemplate.with_secrets" title="mlrun.model.RunTemplate.with_secrets"><code class="xref py py-func docutils literal notranslate"><span class="pre">with_secrets()</span></code></a> function. For example,
the following command passes specific project-secrets to the execution context:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">function</span> <span class="o">=</span> <span class="n">mlrun</span><span class="o">.</span><span class="n">code_to_function</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;secret_func&quot;</span><span class="p">,</span>
    <span class="n">filename</span><span class="o">=</span><span class="s2">&quot;my_code.py&quot;</span><span class="p">,</span>
    <span class="n">handler</span><span class="o">=</span><span class="s2">&quot;test_function&quot;</span><span class="p">,</span>
    <span class="n">kind</span><span class="o">=</span><span class="s2">&quot;job&quot;</span><span class="p">,</span>
    <span class="n">image</span><span class="o">=</span><span class="s2">&quot;mlrun/mlrun&quot;</span>
<span class="p">)</span>
<span class="hll"><span class="n">task</span> <span class="o">=</span> <span class="n">mlrun</span><span class="o">.</span><span class="n">new_task</span><span class="p">()</span><span class="o">.</span><span class="n">with_secrets</span><span class="p">(</span><span class="s2">&quot;kubernetes&quot;</span><span class="p">,</span> <span class="p">[</span><span class="s2">&quot;AWS_KEY&quot;</span><span class="p">,</span> <span class="s2">&quot;DB_PASSWORD&quot;</span><span class="p">])</span>
</span><span class="n">run</span> <span class="o">=</span> <span class="n">function</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">task</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="api/mlrun.model.html#mlrun.model.RunTemplate.with_secrets" title="mlrun.model.RunTemplate.with_secrets"><code class="xref py py-func docutils literal notranslate"><span class="pre">with_secrets()</span></code></a> function tells MLRun what secrets the executed code needs to
access. The MLRun framework prepares the needed infrastructure to make these secrets available to the runtime,
and passes information about them to the execution framework by specifying those secrets in the spec of the runtime.
For example, if running a kubernetes job, the secret keys are noted in the generated pod’s spec.</p>
<p>The actual details of MLRun’s handling of the secrets differ per the <strong>secret provider</strong> used. The following sections
provide more details on these providers and how they handle secrets and their values.</p>
<p>Regardless of the type of secret provider used, the executed code uses the
<a class="reference internal" href="api/mlrun.execution.html#mlrun.execution.MLClientCtx.get_secret" title="mlrun.execution.MLClientCtx.get_secret"><code class="xref py py-func docutils literal notranslate"><span class="pre">get_secret()</span></code></a> API to gain access to the value of the secrets passed to it,
as shown in the above example.</p>
</section>
<section id="secret-providers">
<h3>Secret providers<a class="headerlink" href="#secret-providers" title="Permalink to this headline">#</a></h3>
<p>MLRun provides several secret providers. Each of these providers functions differently and
have different traits with respect to what secrets can be passed and how they’re handled. It’s important to understand
these parameters to make sure secrets are not compromised and that their secrecy is maintained.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>The <a class="reference external" href="#inline">Inline</a>, <a class="reference external" href="#environment">environment</a> and <a class="reference external" href="#file">file</a> providers do not guarantee
confidentiality of the secret values handled by them, and <strong>should only be used for development and demo purposes</strong>.
The <a class="reference external" href="#kubernetes-project-secrets">Kubernetes</a> and <a class="reference external" href="#azure-vault">Azure Vault</a> providers are secure and should be used
for any other use-case.</p>
</div>
<section id="kubernetes-project-secrets">
<h4>Kubernetes project secrets<a class="headerlink" href="#kubernetes-project-secrets" title="Permalink to this headline">#</a></h4>
<p>MLRun can use Kubernetes (k8s) secrets to store and retrieve secret values on a per-project basis. This method
is supported for all runtimes that generate k8s pods.  MLRun creates a k8s secret per project, and stores
multiple secret keys within this secret. Project secrets can be created through the MLRun SDK as well as
through the MLRun UI.</p>
<p>By default, all jobs in a project automatically get access to all the associated project secrets. There is
no need to use <code class="docutils literal notranslate"><span class="pre">with_secrets</span></code> to provide access to project secrets.</p>
<section id="creating-project-secrets">
<h5>Creating project secrets<a class="headerlink" href="#creating-project-secrets" title="Permalink to this headline">#</a></h5>
<p>To populate the MLRun k8s project secret with secret values, use the project object’s
<a class="reference internal" href="api/mlrun.projects.html#mlrun.projects.MlrunProject.set_secrets" title="mlrun.projects.MlrunProject.set_secrets"><code class="xref py py-func docutils literal notranslate"><span class="pre">set_secrets()</span></code></a> function, which accepts a dictionary of secret values or
a file containing a list of secrets. For example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Create project secrets for the myproj project.</span>
<span class="n">project</span> <span class="o">=</span> <span class="n">mlrun</span><span class="o">.</span><span class="n">get_or_create_project</span><span class="p">(</span><span class="s2">&quot;myproj&quot;</span><span class="p">,</span> <span class="s2">&quot;./&quot;</span><span class="p">)</span>
<span class="n">secrets</span> <span class="o">=</span> <span class="p">{</span><span class="s1">&#39;password&#39;</span><span class="p">:</span> <span class="s1">&#39;myPassw0rd&#39;</span><span class="p">,</span> <span class="s1">&#39;AWS_KEY&#39;</span><span class="p">:</span> <span class="s1">&#39;111222333&#39;</span><span class="p">}</span>
<span class="n">project</span><span class="o">.</span><span class="n">set_secrets</span><span class="p">(</span><span class="n">secrets</span><span class="o">=</span><span class="n">secrets</span><span class="p">,</span> <span class="n">provider</span><span class="o">=</span><span class="s2">&quot;kubernetes&quot;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This action should not be part of the code committed to <code class="docutils literal notranslate"><span class="pre">git</span></code> or part of ongoing execution - it is only a setup
action, which normally should only be executed once. After the secrets are populated, this code should be removed
to protect the confidentiality of the secret values.</p>
</div>
<p>The MLRun API does not allow the user to see project secrets values, but it does allow
seeing the keys that belong to a given project, assuming the user has permissions on that specific project.
See the <a class="reference internal" href="api/mlrun.db.html#mlrun.db.httpdb.HTTPRunDB" title="mlrun.db.httpdb.HTTPRunDB"><code class="xref py py-class docutils literal notranslate"><span class="pre">HTTPRunDB</span></code></a> class documentation for additional details.</p>
<p>When MLRun is executed in the Iguazio platform, the secret management APIs are protected by the platform such
that only users with permissions to access and modify a specific project can alter its secrets.</p>
</section>
<section id="creating-secrets-in-the-projects-ui-page">
<h5>Creating secrets in the Projects UI page<a class="headerlink" href="#creating-secrets-in-the-projects-ui-page" title="Permalink to this headline">#</a></h5>
<p>The Settings dialog in the Projects page, accessed with the Settings icon, has a Secrets tab where you can
add secrets as key-value pairs. The secrets are automatically available to all jobs belonging to this project.
Users with the Editor or Admin role can add, modify, and delete secrets, and assign new secret values.
Viewers can only view the secret keys. The values themselves are not visible to any users.</p>
</section>
<section id="accessing-the-secrets">
<h5>Accessing the secrets<a class="headerlink" href="#accessing-the-secrets" title="Permalink to this headline">#</a></h5>
<p>By default, any runtime not executed locally (<code class="docutils literal notranslate"><span class="pre">local=False</span></code>) automatically gains access to all the secrets of the project it
belongs to, so no configuration is required to enable that.
<strong>Jobs that are executed locally (<code class="docutils literal notranslate"><span class="pre">local=True</span></code>) do not have access to the project secrets.</strong>
It is possible to limit access of an executing job to a
subset of these secrets by calling the following function with a list of the secrets to be accessed:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">task</span><span class="o">.</span><span class="n">with_secrets</span><span class="p">(</span><span class="s1">&#39;kubernetes&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;password&#39;</span><span class="p">,</span> <span class="s1">&#39;AWS_KEY&#39;</span><span class="p">])</span>
</pre></div>
</div>
<p>When the job is executed, the MLRun framework adds environment variables to the pod spec whose value is retrieved
through the k8s <code class="docutils literal notranslate"><span class="pre">valueFrom</span></code> option, with <code class="docutils literal notranslate"><span class="pre">secretKeyRef</span></code> pointing at the secret maintained by MLRun.
As a result, this method does not expose the secret values at all, except inside the pod executing the code where
the secret value is exposed through an environment variable. This means that even a user with <code class="docutils literal notranslate"><span class="pre">kubectl</span></code> looking at the
pod spec cannot see the secret values.</p>
<p>Users, however, can view the secrets using the following methods:</p>
<ul class="simple">
<li><p>Run <code class="docutils literal notranslate"><span class="pre">kubectl</span></code> to view the actual contents of the k8s secret.</p></li>
<li><p>Perform <code class="docutils literal notranslate"><span class="pre">kubectl</span> <span class="pre">exec</span></code> into the running pod, and examine the environment variables.</p></li>
</ul>
<p>To maintain the confidentiality of secret values, these operations must be strictly limited across the system by using
k8s RBAC and ensuring that elevated permissions are granted to a very limited number of users (very few users have and
use elevated permissions).</p>
</section>
<section id="accessing-secrets-in-nuclio-functions">
<h5>Accessing secrets in nuclio functions<a class="headerlink" href="#accessing-secrets-in-nuclio-functions" title="Permalink to this headline">#</a></h5>
<p>Nuclio functions do not have the MLRun context available to retrieve secret values. Secret values need to be retrieved
from the environment variable of the same name. For example, to access the <code class="docutils literal notranslate"><span class="pre">AWS_KEY</span></code> secret in a nuclio function use:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">aws_key</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;AWS_KEY&quot;</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>
<section id="azure-vault">
<h4>Azure Vault<a class="headerlink" href="#azure-vault" title="Permalink to this headline">#</a></h4>
<p>MLRun can serve secrets from an Azure key Vault.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Azure key Vaults support 3 types of entities - <code class="docutils literal notranslate"><span class="pre">keys</span></code>, <code class="docutils literal notranslate"><span class="pre">secrets</span></code> and <code class="docutils literal notranslate"><span class="pre">certificates</span></code>. MLRun only supports accessing
<code class="docutils literal notranslate"><span class="pre">secret</span></code> entities.</p>
</div>
<section id="setting-up-access-to-azure-key-vault">
<h5>Setting up access to Azure key vault<a class="headerlink" href="#setting-up-access-to-azure-key-vault" title="Permalink to this headline">#</a></h5>
<p>To enable this functionality, a secret must first be created in the k8s cluster that contains the Azure key Vault
credentials. This secret should include credentials providing access to your specific Azure key Vault.
To configure this, the following steps are needed:</p>
<ol class="arabic">
<li><p>Set up a key vault in your Azure subscription.</p></li>
<li><p>Create a service principal in Azure that will be granted access to the key vault. For creating a service principal
through the Azure portal follow the steps listed in <a class="reference external" href="https://docs.microsoft.com/en-us/azure/active-directory/develop/howto-create-service-principal-portal">this page</a>.</p></li>
<li><p>Assign a key vault access policy to the service principal, as described in
<a class="reference external" href="https://docs.microsoft.com/en-us/azure/key-vault/general/assign-access-policy-portal">this page</a>.</p></li>
<li><p>Create a secret access key for the service principal, following the steps listed in <a class="reference external" href="https://docs.microsoft.com/en-us/azure/active-directory/develop/howto-create-service-principal-portal#get-tenant-and-app-id-values-for-signing-in">this page</a>.
Make sure you have access to the following three identifiers:</p>
<ul class="simple">
<li><p>Directory (tenant) id</p></li>
<li><p>Application (client) id</p></li>
<li><p>Secret key</p></li>
</ul>
</li>
<li><p>Generate a k8s secret with those details. Use the following command:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span>kubectl -n &lt;namespace&gt; create secret generic &lt;azure_key_vault_k8s_secret&gt; <span class="se">\</span>
   --from-literal<span class="o">=</span><span class="nv">secret</span><span class="o">=</span>&lt;secret key&gt; <span class="se">\</span>
   --from-literal<span class="o">=</span><span class="nv">tenant_id</span><span class="o">=</span>&lt;tenant id&gt; <span class="se">\</span>
   --from-literal<span class="o">=</span><span class="nv">client_id</span><span class="o">=</span>&lt;client id&gt;
</pre></div>
</div>
</li>
</ol>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The names of the secret keys <em>must</em> be as shown in the above example, as MLRun queries them by these exact names.</p>
</div>
</section>
<section id="accessing-azure-key-vault-secrets">
<h5>Accessing Azure key vault secrets<a class="headerlink" href="#accessing-azure-key-vault-secrets" title="Permalink to this headline">#</a></h5>
<p>Once these steps are done, use <code class="docutils literal notranslate"><span class="pre">with_secrets</span></code> in the following manner:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">task</span><span class="o">.</span><span class="n">with_secrets</span><span class="p">(</span>
    <span class="s2">&quot;azure_vault&quot;</span><span class="p">,</span>
    <span class="p">{</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">azure_key_vault_name</span><span class="o">&gt;</span><span class="p">,</span>
        <span class="s2">&quot;k8s_secret&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">azure_key_vault_k8s_secret</span><span class="o">&gt;</span><span class="p">,</span>
        <span class="s2">&quot;secrets&quot;</span><span class="p">:</span> <span class="p">[],</span>
    <span class="p">},</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">name</span></code> parameter should point at your Azure key Vault name. The <code class="docutils literal notranslate"><span class="pre">secrets</span></code> parameter is a list of the secret keys
to be accessed from that specific vault. If it’s empty (as in the example above) then all secrets in the vault can be
accessed by their key name.</p>
<p>For example, if the Azure Vault has a secret whose name is <code class="docutils literal notranslate"><span class="pre">MY_AZURE_SECRET</span></code> and using the above example for
<a class="reference internal" href="api/mlrun.model.html#mlrun.model.RunTemplate.with_secrets" title="mlrun.model.RunTemplate.with_secrets"><code class="xref py py-func docutils literal notranslate"><span class="pre">with_secrets()</span></code></a>, the executed code can use the following statement to access
this secret:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">azure_secret</span> <span class="o">=</span> <span class="n">context</span><span class="o">.</span><span class="n">get_secret</span><span class="p">(</span><span class="s2">&quot;MY_AZURE_SECRET&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>In terms of confidentiality, the executed pod has the Azure secret provided by the user mounted to it. This means
that the access-keys to the vault are visible to a user that <code class="docutils literal notranslate"><span class="pre">exec</span></code>s into the pod in question. The same security
rules should be followed as described in the <a class="reference external" href="#kubernetes-project-secrets">Kubernetes</a> section above.</p>
</section>
</section>
<section id="demo-development-secret-providers">
<h4>Demo/Development secret providers<a class="headerlink" href="#demo-development-secret-providers" title="Permalink to this headline">#</a></h4>
<p>The rest of the MLRun secret providers are not secure by design, and should only be used for demonstration or
development purposes.</p>
<details>
<summary>Expand here for additional details.</summary>
<section id="inline">
<h5>Inline<a class="headerlink" href="#inline" title="Permalink to this headline">#</a></h5>
<p>The inline secrets provider is a very basic framework that should mostly be used for testing and demos. The secrets
passed by this framework are exposed in the source code creating the MLRun function, as well as in the function spec, and
in the generated pod specs. To add inline secrets to a job, perform the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">task</span><span class="o">.</span><span class="n">with_secrets</span><span class="p">(</span><span class="s2">&quot;inline&quot;</span><span class="p">,</span> <span class="p">{</span><span class="s2">&quot;MY_SECRET&quot;</span><span class="p">:</span> <span class="s2">&quot;12345&quot;</span><span class="p">})</span>
</pre></div>
</div>
<p>As can be seen, even the client code exposes the secret value. If this is used to pass secrets to a job running in a kubernetes
pod, the secret is also visible in the pod spec. This means that any user that can run <code class="docutils literal notranslate"><span class="pre">kubectl</span></code> and is permitted
to view pod specs can also see the secret keys and their values.</p>
</section>
<section id="environment">
<h5>Environment<a class="headerlink" href="#environment" title="Permalink to this headline">#</a></h5>
<p>Environment variables are similar to the <code class="docutils literal notranslate"><span class="pre">inline</span></code> secrets, but their client-side value is not specified directly in
code but rather is extracted from a client-side environment variable. For example, if running MLRun on a Jupyter
notebook and there are environment variables named <code class="docutils literal notranslate"><span class="pre">MY_SECRET</span></code> and <code class="docutils literal notranslate"><span class="pre">ANOTHER_SECRET</span></code> on Jupyter, the following code<br />
passes those secrets to the executed runtime:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">task</span><span class="o">.</span><span class="n">with_secrets</span><span class="p">(</span><span class="s2">&quot;env&quot;</span><span class="p">,</span> <span class="s2">&quot;MY_SECRET, ANOTHER_SECRET&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>When generating the runtime execution environment (for example, pod for the <code class="docutils literal notranslate"><span class="pre">job</span></code> runtime), MLRun retrieves the
value of the environment variable and places it in the pod spec. This means that a user with <code class="docutils literal notranslate"><span class="pre">kubectl</span></code> capabilities who
can see pod specs can still see the secret values passed in this manner.</p>
</section>
<section id="file">
<h5>File<a class="headerlink" href="#file" title="Permalink to this headline">#</a></h5>
<p>The file provider is used to pass secret values that are stored in a local file. The file needs to be made of
lines, each containing a secret and its value separated by <code class="docutils literal notranslate"><span class="pre">=</span></code>. For example:</p>
<div class="highlight-shell notranslate"><div class="highlight"><pre><span></span><span class="c1"># secrets.txt</span>
<span class="nv">SECRET1</span><span class="o">=</span><span class="m">123456</span>
<span class="nv">SECRET2</span><span class="o">=</span>abcdef
</pre></div>
</div>
<p>Use the following command to add these secrets:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">task</span><span class="o">.</span><span class="n">with_secrets</span><span class="p">(</span><span class="s2">&quot;file&quot;</span><span class="p">,</span> <span class="s2">&quot;/path/to/file/secrets.txt&quot;</span><span class="p">)</span>
</pre></div>
</div>
</details>
</section>
</section>
</section>
</section>
<section id="externally-managed-secrets">
<h2>Externally managed secrets<a class="headerlink" href="#externally-managed-secrets" title="Permalink to this headline">#</a></h2>
<p>MLRun provides facilities to map k8s secrets that were created externally to jobs that are executed. To enable that,
the spec of the runtime that is created should be modified by mounting secrets to it - either as files or as
environment variables containing specific keys from the secret.</p>
<section id="mapping-secrets-to-environment">
<h3>Mapping secrets to environment<a class="headerlink" href="#mapping-secrets-to-environment" title="Permalink to this headline">#</a></h3>
<p>Let’s assume a k8s secret called <code class="docutils literal notranslate"><span class="pre">my-secret</span></code> was created in the same k8s namespace where MLRun is running, with two
keys in it - <code class="docutils literal notranslate"><span class="pre">secret1</span></code> and <code class="docutils literal notranslate"><span class="pre">secret2</span></code>. The following example adds these two secret keys as environment variables
to an MLRun job:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">function</span> <span class="o">=</span> <span class="n">mlrun</span><span class="o">.</span><span class="n">code_to_function</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;secret_func&quot;</span><span class="p">,</span>
    <span class="n">handler</span><span class="o">=</span><span class="s2">&quot;test_function&quot;</span><span class="p">,</span>
    <span class="o">...</span>
<span class="p">)</span>

<span class="hll"><span class="n">function</span><span class="o">.</span><span class="n">set_env_from_secret</span><span class="p">(</span>
</span><span class="hll">    <span class="s2">&quot;SECRET_ENV_VAR_1&quot;</span><span class="p">,</span> <span class="n">secret</span><span class="o">=</span><span class="s2">&quot;my-secret&quot;</span><span class="p">,</span> <span class="n">secret_key</span><span class="o">=</span><span class="s2">&quot;secret1&quot;</span>
</span><span class="hll"><span class="p">)</span>
</span><span class="hll"><span class="n">function</span><span class="o">.</span><span class="n">set_env_from_secret</span><span class="p">(</span>
</span><span class="hll">    <span class="s2">&quot;SECRET_ENV_VAR_2&quot;</span><span class="p">,</span> <span class="n">secret</span><span class="o">=</span><span class="s2">&quot;my-secret&quot;</span><span class="p">,</span> <span class="n">secret_key</span><span class="o">=</span><span class="s2">&quot;secret2&quot;</span>
</span><span class="hll"><span class="p">)</span>
</span></pre></div>
</div>
<p>This only takes effect for functions executed remotely, as the secret value is injected to the function pod, which does
not exist for functions executed locally.
Within the function code, the secret values will be exposed as regular environment variables, for example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Function handler</span>
<span class="k">def</span> <span class="nf">test_function</span><span class="p">(</span><span class="n">context</span><span class="p">):</span>
    <span class="c1"># Getting the value in the secret2 key.</span>
<span class="hll">    <span class="n">my_secret_value</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;SECRET_ENV_VAR_2&quot;</span><span class="p">)</span>
</span>    <span class="o">...</span>
</pre></div>
</div>
</section>
<section id="mapping-secrets-as-files">
<h3>Mapping secrets as files<a class="headerlink" href="#mapping-secrets-as-files" title="Permalink to this headline">#</a></h3>
<p>A k8s secret can be mapped as a filesystem folder to the function pod using the <a class="reference internal" href="api/mlrun.platforms.html#mlrun.platforms.mount_secret" title="mlrun.platforms.mount_secret"><code class="xref py py-func docutils literal notranslate"><span class="pre">mount_secret()</span></code></a>
function:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Mount all keys in the secret as files under /mnt/secrets</span>
<span class="n">function</span><span class="o">.</span><span class="n">mount_secret</span><span class="p">(</span><span class="s2">&quot;my-secret&quot;</span><span class="p">,</span> <span class="s2">&quot;/mnt/secrets/&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>This creates two files in the function pod, called <code class="docutils literal notranslate"><span class="pre">/mnt/secrets/secret1</span></code> and <code class="docutils literal notranslate"><span class="pre">/mnt/secrets/secret2</span></code>. Reading these
files provide the values. It is possible to limit the keys mounted to the function - see the documentation
of <a class="reference internal" href="api/mlrun.platforms.html#mlrun.platforms.mount_secret" title="mlrun.platforms.mount_secret"><code class="xref py py-func docutils literal notranslate"><span class="pre">mount_secret()</span></code></a> for more details.</p>
</section>
</section>
</section>


              </div>
              
            </main>
            <footer class="footer-article noprint">
                
    <!-- Previous / next buttons -->
<div class='prev-next-area'>
    <a class='left-prev' id="prev-link" href="projects/ci-integration.html" title="previous page">
        <i class="fas fa-angle-left"></i>
        <div class="prev-next-info">
            <p class="prev-next-subtitle">previous</p>
            <p class="prev-next-title">CI/CD integration</p>
        </div>
    </a>
    <a class='right-next' id="next-link" href="runtimes/functions.html" title="next page">
    <div class="prev-next-info">
        <p class="prev-next-subtitle">next</p>
        <p class="prev-next-title">Serverless functions</p>
    </div>
    <i class="fas fa-angle-right"></i>
    </a>
</div>
            </footer>
        </div>
    </div>
    <div class="footer-content row">
        <footer class="col footer"><p>
  
    By Iguazio<br/>
  
      &copy; Copyright 2022, Iguazio.<br/>
</p>
        </footer>
    </div>
    
</div>


      </div>
    </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script src="_static/scripts/pydata-sphinx-theme.js?digest=1999514e3f237ded88cf"></script>



<div class="footer"><!-- This page uses <a href="https://analytics.google.com/">
Google Analytics</a> to collect statistics. You can disable it by blocking
the JavaScript coming from www.google-analytics.com. -->

</div>

  </body>
</html>